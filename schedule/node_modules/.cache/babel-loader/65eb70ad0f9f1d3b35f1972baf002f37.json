{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Component, EventHandler, Property, Event, append } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, isVisible, closest, attributes, detach, classList, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { selectAll, setStyleAttribute as setStyle } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, getUniqueID, formatUnit, Collection, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, ChildProperty, Browser, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { isBlazor } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { HScroll } from '../common/h-scroll';\nimport { VScroll } from '../common/v-scroll';\nvar CLS_VERTICAL = 'e-vertical';\nvar CLS_ITEMS = 'e-toolbar-items';\nvar BZ_ITEMS = 'e-blazor-toolbar-items';\nvar CLS_ITEM = 'e-toolbar-item';\nvar CLS_RTL = 'e-rtl';\nvar CLS_SEPARATOR = 'e-separator';\nvar CLS_POPUPICON = 'e-popup-up-icon';\nvar CLS_POPUPDOWN = 'e-popup-down-icon';\nvar CLS_POPUPOPEN = 'e-popup-open';\nvar CLS_TEMPLATE = 'e-template';\nvar CLS_DISABLE = 'e-overlay';\nvar CLS_POPUPTEXT = 'e-toolbar-text';\nvar CLS_TBARTEXT = 'e-popup-text';\nvar CLS_TBAROVERFLOW = 'e-overflow-show';\nvar CLS_POPOVERFLOW = 'e-overflow-hide';\nvar CLS_TBARBTN = 'e-tbar-btn';\nvar CLS_TBARNAV = 'e-hor-nav';\nvar CLS_TBARSCRLNAV = 'e-scroll-nav';\nvar CLS_TBARRIGHT = 'e-toolbar-right';\nvar CLS_TBARLEFT = 'e-toolbar-left';\nvar CLS_TBARCENTER = 'e-toolbar-center';\nvar CLS_TBARPOS = 'e-tbar-pos';\nvar CLS_HSCROLLCNT = 'e-hscroll-content';\nvar CLS_VSCROLLCNT = 'e-vscroll-content';\nvar CLS_HSCROLLBAR = 'e-hscroll-bar';\nvar CLS_POPUPNAV = 'e-hor-nav';\nvar CLS_POPUPCLASS = 'e-toolbar-pop';\nvar CLS_POPUP = 'e-toolbar-popup';\nvar CLS_TBARBTNTEXT = 'e-tbar-btn-text';\nvar CLS_TBARNAVACT = 'e-nav-active';\nvar CLS_TBARIGNORE = 'e-ignore';\nvar CLS_POPPRI = 'e-popup-alone';\nvar CLS_HIDDEN = 'e-hidden';\nvar CLS_MULTIROW = 'e-toolbar-multirow';\nvar CLS_MULTIROWPOS = 'e-multirow-pos';\nvar CLS_MULTIROW_SEPARATOR = 'e-multirow-separator';\nvar CLS_EXTENDABLE_SEPARATOR = 'e-extended-separator';\nvar CLS_EXTEANDABLE_TOOLBAR = 'e-extended-toolbar';\nvar CLS_EXTENDABLECLASS = 'e-toolbar-extended';\nvar CLS_EXTENDPOPUP = 'e-expended-nav';\nvar CLS_EXTENDEDPOPOPEN = 'e-tbar-extended';\n/**\n * An item object that is used to configure Toolbar commands.\n */\n\nvar Item =\n/** @class */\nfunction (_super) {\n  __extends(Item, _super);\n\n  function Item() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('')], Item.prototype, \"id\", void 0);\n\n  __decorate([Property('')], Item.prototype, \"text\", void 0);\n\n  __decorate([Property('auto')], Item.prototype, \"width\", void 0);\n\n  __decorate([Property('')], Item.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(false)], Item.prototype, \"showAlwaysInPopup\", void 0);\n\n  __decorate([Property(false)], Item.prototype, \"disabled\", void 0);\n\n  __decorate([Property('')], Item.prototype, \"prefixIcon\", void 0);\n\n  __decorate([Property('')], Item.prototype, \"suffixIcon\", void 0);\n\n  __decorate([Property(true)], Item.prototype, \"visible\", void 0);\n\n  __decorate([Property('None')], Item.prototype, \"overflow\", void 0);\n\n  __decorate([Property('')], Item.prototype, \"template\", void 0);\n\n  __decorate([Property('Button')], Item.prototype, \"type\", void 0);\n\n  __decorate([Property('Both')], Item.prototype, \"showTextOn\", void 0);\n\n  __decorate([Property(null)], Item.prototype, \"htmlAttributes\", void 0);\n\n  __decorate([Property('')], Item.prototype, \"tooltipText\", void 0);\n\n  __decorate([Property('Left')], Item.prototype, \"align\", void 0);\n\n  __decorate([Event()], Item.prototype, \"click\", void 0);\n\n  return Item;\n}(ChildProperty);\n\nexport { Item };\n/**\n * The Toolbar control contains a group of commands that are aligned horizontally.\n * ```html\n * <div id=\"toolbar\"/>\n * <script>\n *   var toolbarObj = new Toolbar();\n *   toolbarObj.appendTo(\"#toolbar\");\n * </script>\n * ```\n */\n\nvar Toolbar =\n/** @class */\nfunction (_super) {\n  __extends(Toolbar, _super);\n  /**\n   * Initializes a new instance of the Toolbar class.\n   * @param options  - Specifies Toolbar model properties as options.\n   * @param element  - Specifies the element that is rendered as a Toolbar.\n   */\n\n\n  function Toolbar(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.resizeContext = _this.resize.bind(_this);\n    /**\n     * Contains the keyboard configuration of the Toolbar.\n     */\n\n    _this.keyConfigs = {\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      moveUp: 'uparrow',\n      moveDown: 'downarrow',\n      popupOpen: 'enter',\n      popupClose: 'escape',\n      tab: 'tab',\n      home: 'home',\n      end: 'end'\n    };\n    return _this;\n  }\n  /**\n   * Removes the control from the DOM and also removes all its related events.\n   * @returns void.\n   */\n\n\n  Toolbar.prototype.destroy = function () {\n    var _this = this; // tslint:disable-next-line:no-any\n\n\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    _super.prototype.destroy.call(this);\n\n    this.unwireEvents();\n    this.tempId.forEach(function (ele) {\n      if (!isNOU(_this.element.querySelector(ele))) {\n        document.body.appendChild(_this.element.querySelector(ele)).style.display = 'none';\n      }\n    });\n\n    if (isBlazor() && this.isServerRendered) {\n      this.resetServerItems();\n    }\n\n    while (this.element.lastElementChild && !this.element.lastElementChild.classList.contains(BZ_ITEMS)) {\n      this.element.removeChild(this.element.lastElementChild);\n    }\n\n    if (this.trgtEle) {\n      this.element.appendChild(this.ctrlTem);\n    }\n\n    this.clearProperty();\n    this.popObj = null;\n    this.tbarAlign = null;\n    this.remove(this.element, 'e-toolpop');\n\n    if (this.cssClass) {\n      removeClass([this.element], this.cssClass.split(' '));\n    }\n\n    this.element.removeAttribute('style');\n    ['aria-disabled', 'aria-orientation', 'aria-haspopup', 'role'].forEach(function (attrb) {\n      return _this.element.removeAttribute(attrb);\n    });\n  };\n  /**\n   * Initialize the event handler\n   * @private\n   */\n\n\n  Toolbar.prototype.preRender = function () {\n    var eventArgs = {\n      enableCollision: this.enableCollision,\n      scrollStep: this.scrollStep\n    };\n    this.trigger('beforeCreate', eventArgs);\n    this.enableCollision = eventArgs.enableCollision;\n    this.scrollStep = eventArgs.scrollStep;\n    this.scrollModule = null;\n    this.popObj = null;\n    this.tempId = [];\n    this.tbarItemsCol = this.items;\n    this.isVertical = this.element.classList.contains(CLS_VERTICAL) ? true : false;\n    this.isExtendedOpen = false;\n    this.popupPriCount = 0;\n\n    if (this.enableRtl) {\n      this.add(this.element, CLS_RTL);\n    }\n  };\n\n  Toolbar.prototype.wireEvents = function () {\n    EventHandler.add(this.element, 'click', this.clickHandler, this);\n    window.addEventListener('resize', this.resizeContext);\n\n    if (this.allowKeyboard) {\n      this.wireKeyboardEvent();\n    }\n  };\n\n  Toolbar.prototype.wireKeyboardEvent = function () {\n    this.keyModule = new KeyboardEvents(this.element, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs\n    });\n    EventHandler.add(this.element, 'keydown', this.docKeyDown, this);\n    this.element.setAttribute('tabIndex', '0');\n  };\n\n  Toolbar.prototype.unwireKeyboardEvent = function () {\n    if (this.keyModule) {\n      EventHandler.remove(this.element, 'keydown', this.docKeyDown);\n      this.keyModule.destroy();\n      this.keyModule = null;\n    }\n  };\n\n  Toolbar.prototype.docKeyDown = function (e) {\n    if (e.target.tagName === 'INPUT') {\n      return;\n    }\n\n    var popCheck = !isNOU(this.popObj) && isVisible(this.popObj.element) && this.overflowMode !== 'Extended';\n\n    if (e.keyCode === 9 && e.target.classList.contains('e-hor-nav') === true && popCheck) {\n      this.popObj.hide({\n        name: 'FadeOut',\n        duration: 100\n      });\n    }\n\n    var keyCheck = e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 35 || e.keyCode === 36;\n\n    if (keyCheck) {\n      e.preventDefault();\n    }\n  };\n\n  Toolbar.prototype.unwireEvents = function () {\n    EventHandler.remove(this.element, 'click', this.clickHandler);\n    this.destroyScroll();\n    this.unwireKeyboardEvent();\n    window.removeEventListener('resize', this.resizeContext);\n    EventHandler.remove(document, 'scroll', this.docEvent);\n    EventHandler.remove(document, 'click', this.docEvent);\n  };\n\n  Toolbar.prototype.clearProperty = function () {\n    this.tbarEle = [];\n    this.tbarAlgEle = {\n      lefts: [],\n      centers: [],\n      rights: []\n    };\n  };\n\n  Toolbar.prototype.docEvent = function (e) {\n    var popEle = closest(e.target, '.e-popup');\n\n    if (this.popObj && isVisible(this.popObj.element) && !popEle && this.overflowMode === 'Popup') {\n      this.popObj.hide({\n        name: 'FadeOut',\n        duration: 100\n      });\n    }\n  };\n\n  Toolbar.prototype.destroyScroll = function () {\n    if (this.scrollModule) {\n      if (this.tbarAlign) {\n        this.add(this.scrollModule.element, CLS_TBARPOS);\n      }\n\n      this.scrollModule.destroy();\n      this.scrollModule = null;\n    }\n  };\n\n  Toolbar.prototype.destroyItems = function () {\n    [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM)).forEach(function (el) {\n      detach(el);\n    });\n    var tbarItems = this.element.querySelector('.' + CLS_ITEMS);\n\n    if (this.tbarAlign) {\n      [].slice.call(tbarItems.children).forEach(function (el) {\n        detach(el);\n      });\n      this.tbarAlign = false;\n      this.remove(tbarItems, CLS_TBARPOS);\n    }\n\n    this.clearProperty();\n  };\n\n  Toolbar.prototype.destroyMode = function () {\n    if (this.scrollModule) {\n      this.remove(this.scrollModule.element, CLS_RTL);\n      this.destroyScroll();\n    }\n\n    this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n    this.remove(this.element, CLS_EXTEANDABLE_TOOLBAR);\n    var tempEle = this.element.querySelector('.e-toolbar-multirow');\n\n    if (tempEle) {\n      this.remove(tempEle, CLS_MULTIROW);\n    }\n\n    if (this.popObj) {\n      this.popupRefresh(this.popObj.element, true);\n    }\n  };\n\n  Toolbar.prototype.add = function (ele, val) {\n    ele.classList.add(val);\n  };\n\n  Toolbar.prototype.remove = function (ele, val) {\n    ele.classList.remove(val);\n  };\n\n  Toolbar.prototype.elementFocus = function (ele) {\n    var fChild = ele.firstElementChild;\n\n    if (fChild) {\n      fChild.focus();\n      this.activeEleSwitch(ele);\n    } else {\n      ele.focus();\n    }\n  };\n\n  Toolbar.prototype.clstElement = function (tbrNavChk, trgt) {\n    var clst;\n\n    if (tbrNavChk && this.popObj && isVisible(this.popObj.element)) {\n      clst = this.popObj.element.querySelector('.' + CLS_ITEM);\n    } else if (this.element === trgt || tbrNavChk) {\n      // tslint:disable-next-line:max-line-length\n      clst = this.element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_DISABLE + ' ):not(.' + CLS_SEPARATOR + ' ):not(.' + CLS_HIDDEN + ' )');\n    } else {\n      clst = closest(trgt, '.' + CLS_ITEM);\n    }\n\n    return clst;\n  };\n\n  Toolbar.prototype.keyHandling = function (clst, e, trgt, navChk, scrollChk) {\n    var popObj = this.popObj;\n    var rootEle = this.element;\n    var popAnimate = {\n      name: 'FadeOut',\n      duration: 100\n    };\n\n    switch (e.action) {\n      case 'moveRight':\n        if (this.isVertical) {\n          return;\n        }\n\n        if (rootEle === trgt) {\n          this.elementFocus(clst);\n        } else if (!navChk) {\n          this.eleFocus(clst, 'next');\n        }\n\n        break;\n\n      case 'moveLeft':\n        if (this.isVertical) {\n          return;\n        }\n\n        if (!navChk) {\n          this.eleFocus(clst, 'previous');\n        }\n\n        break;\n\n      case 'home':\n      case 'end':\n        var ele = void 0;\n        var nodes = void 0;\n\n        if (clst) {\n          var popupCheck = closest(clst, '.e-popup');\n\n          if (popupCheck) {\n            if (isVisible(this.popObj.element)) {\n              nodes = [].slice.call(popupCheck.children);\n\n              if (e.action === 'home') {\n                ele = nodes[0];\n              } else {\n                ele = nodes[nodes.length - 1];\n              }\n            }\n          } else {\n            nodes = this.element.querySelectorAll('.' + CLS_ITEMS + ' .' + CLS_ITEM);\n\n            if (e.action === 'home') {\n              ele = nodes[0];\n            } else {\n              ele = nodes[nodes.length - 1];\n            }\n          }\n\n          if (ele) {\n            this.elementFocus(ele);\n          }\n        }\n\n        break;\n\n      case 'moveUp':\n      case 'moveDown':\n        var value = e.action === 'moveUp' ? 'previous' : 'next';\n\n        if (!this.isVertical) {\n          if (popObj && closest(trgt, '.e-popup')) {\n            var popEle = popObj.element;\n            var popFrstEle = popEle.firstElementChild;\n\n            if (value === 'previous' && popFrstEle === clst || value === 'next' && popEle.lastElementChild === clst) {\n              return;\n            } else {\n              this.eleFocus(clst, value);\n            }\n          } else if (e.action === 'moveDown' && popObj && isVisible(popObj.element)) {\n            this.elementFocus(clst);\n          }\n        } else {\n          if (e.action === 'moveUp') {\n            this.eleFocus(clst, 'previous');\n          } else {\n            this.eleFocus(clst, 'next');\n          }\n        }\n\n        break;\n\n      case 'tab':\n        if (!scrollChk && !navChk) {\n          var ele_1 = clst.firstElementChild;\n\n          if (rootEle === trgt) {\n            if (this.activeEle) {\n              this.activeEle.focus();\n            } else {\n              this.activeEleRemove(ele_1);\n              ele_1.focus();\n            }\n\n            this.element.removeAttribute('tabindex');\n          }\n        }\n\n        break;\n\n      case 'popupClose':\n        if (popObj && this.overflowMode !== 'Extended') {\n          popObj.hide(popAnimate);\n        }\n\n        break;\n\n      case 'popupOpen':\n        if (!navChk) {\n          return;\n        }\n\n        if (popObj && !isVisible(popObj.element)) {\n          popObj.element.style.top = rootEle.offsetHeight + 'px';\n          popObj.show({\n            name: 'FadeIn',\n            duration: 100\n          });\n        } else {\n          popObj.hide(popAnimate);\n        }\n\n        break;\n    }\n  };\n\n  Toolbar.prototype.keyActionHandler = function (e) {\n    var trgt = e.target;\n\n    if (trgt.tagName === 'INPUT' || trgt.tagName === 'TEXTAREA' || this.element.classList.contains(CLS_DISABLE)) {\n      return;\n    }\n\n    e.preventDefault();\n    var clst;\n    var tbrNavChk = trgt.classList.contains(CLS_TBARNAV);\n    var tbarScrollChk = trgt.classList.contains(CLS_TBARSCRLNAV);\n    clst = this.clstElement(tbrNavChk, trgt);\n\n    if (clst || tbarScrollChk) {\n      this.keyHandling(clst, e, trgt, tbrNavChk, tbarScrollChk);\n    }\n  };\n  /**\n   * Specifies the value to disable/enable the Toolbar component.\n   * When set to `true`, the component will be disabled.\n   * @param  {boolean} value - Based on this Boolean value, Toolbar will be enabled (false) or disabled (true).\n   * @returns void.\n   */\n\n\n  Toolbar.prototype.disable = function (value) {\n    var rootEle = this.element;\n    value ? rootEle.classList.add(CLS_DISABLE) : rootEle.classList.remove(CLS_DISABLE);\n    rootEle.setAttribute('tabindex', !value ? '0' : '-1');\n\n    if (this.activeEle) {\n      this.activeEle.setAttribute('tabindex', !value ? '0' : '-1');\n    }\n\n    if (this.scrollModule) {\n      this.scrollModule.disable(value);\n    }\n\n    if (this.popObj) {\n      if (isVisible(this.popObj.element) && this.overflowMode !== 'Extended') {\n        this.popObj.hide();\n      }\n\n      rootEle.querySelector('#' + rootEle.id + '_nav').setAttribute('tabindex', !value ? '0' : '-1');\n    }\n  };\n\n  Toolbar.prototype.eleContains = function (el) {\n    // tslint:disable-next-line:max-line-length\n    return el.classList.contains(CLS_SEPARATOR) || el.classList.contains(CLS_DISABLE) || el.getAttribute('disabled') || el.classList.contains(CLS_HIDDEN) || !isVisible(el); // tslint:enable-next-line:max-line-length\n  };\n\n  Toolbar.prototype.eleFocus = function (closest, pos) {\n    var sib = Object(closest)[pos + 'ElementSibling'];\n\n    if (sib) {\n      var skipEle = this.eleContains(sib);\n\n      if (skipEle) {\n        this.eleFocus(sib, pos);\n        return;\n      }\n\n      this.elementFocus(sib);\n    } else if (this.tbarAlign) {\n      var elem = Object(closest.parentElement)[pos + 'ElementSibling'];\n\n      if (!isNOU(elem) && elem.children.length === 0) {\n        elem = Object(elem)[pos + 'ElementSibling'];\n      }\n\n      if (!isNOU(elem) && elem.children.length > 0) {\n        if (pos === 'next') {\n          var el = elem.querySelector('.' + CLS_ITEM);\n\n          if (this.eleContains(el)) {\n            this.eleFocus(el, pos);\n          } else {\n            el.firstElementChild.focus();\n            this.activeEleSwitch(el);\n          }\n        } else {\n          var el = elem.lastElementChild;\n\n          if (this.eleContains(el)) {\n            this.eleFocus(el, pos);\n          } else {\n            this.elementFocus(el);\n          }\n        }\n      }\n    }\n  };\n\n  Toolbar.prototype.clickHandler = function (e) {\n    var _this = this;\n\n    var trgt = e.target;\n    var clsList = trgt.classList;\n    var ele = this.element;\n    var isPopupElement = !isNOU(closest(trgt, '.' + CLS_POPUPCLASS));\n    var popupNav = closest(trgt, '.' + CLS_TBARNAV);\n\n    if (!popupNav) {\n      popupNav = trgt;\n    }\n\n    if (!ele.children[0].classList.contains('e-hscroll') && !ele.children[0].classList.contains('e-vscroll') && clsList.contains(CLS_TBARNAV)) {\n      clsList = trgt.querySelector('.e-icons').classList;\n    }\n\n    if (clsList.contains(CLS_POPUPICON) || clsList.contains(CLS_POPUPDOWN)) {\n      this.popupClickHandler(ele, popupNav, CLS_RTL);\n    }\n\n    var itemObj;\n    var clst = closest(e.target, '.' + CLS_ITEM);\n\n    if ((isNOU(clst) || clst.classList.contains(CLS_DISABLE)) && !popupNav.classList.contains(CLS_TBARNAV)) {\n      return;\n    }\n\n    if (clst) {\n      var tempItem = this.items[this.tbarEle.indexOf(clst)];\n\n      if (tempItem && isBlazor() && this.isServerRendered) {\n        itemObj = {\n          id: tempItem.id,\n          text: tempItem.text,\n          width: tempItem.width,\n          cssClass: tempItem.cssClass,\n          showAlwaysInPopup: tempItem.showAlwaysInPopup,\n          disabled: tempItem.disabled,\n          prefixIcon: tempItem.prefixIcon,\n          suffixIcon: tempItem.suffixIcon,\n          visible: tempItem.visible,\n          overflow: tempItem.overflow,\n          template: tempItem.template,\n          type: tempItem.type,\n          showTextOn: tempItem.showTextOn,\n          htmlAttributes: tempItem.htmlAttributes,\n          tooltipText: tempItem.tooltipText,\n          align: tempItem.align,\n          click: tempItem.click\n        };\n      } else {\n        itemObj = tempItem;\n      }\n    }\n\n    var eventArgs = {\n      originalEvent: e,\n      item: itemObj\n    };\n\n    if (itemObj && !isNOU(itemObj.click)) {\n      this.trigger('items[' + this.tbarEle.indexOf(clst) + '].click', eventArgs);\n    }\n\n    if (!eventArgs.cancel) {\n      this.trigger('clicked', eventArgs, function (clickedArgs) {\n        if (!isNOU(_this.popObj) && isPopupElement && !clickedArgs.cancel && _this.overflowMode === 'Popup' && clickedArgs.item && clickedArgs.item.type !== 'Input') {\n          _this.popObj.hide({\n            name: 'FadeOut',\n            duration: 100\n          });\n        }\n      });\n    }\n  };\n\n  ;\n\n  Toolbar.prototype.popupClickHandler = function (ele, popupNav, CLS_RTL) {\n    var popObj = this.popObj;\n\n    if (isVisible(popObj.element)) {\n      popupNav.classList.remove(CLS_TBARNAVACT);\n      popObj.hide({\n        name: 'FadeOut',\n        duration: 100\n      });\n    } else {\n      if (ele.classList.contains(CLS_RTL)) {\n        popObj.enableRtl = true;\n        popObj.position = {\n          X: 'left',\n          Y: 'top'\n        };\n      }\n\n      if (popObj.offsetX === 0 && !ele.classList.contains(CLS_RTL)) {\n        popObj.enableRtl = false;\n        popObj.position = {\n          X: 'right',\n          Y: 'top'\n        };\n      }\n\n      popObj.dataBind();\n      popObj.refreshPosition();\n      popObj.element.style.top = this.getElementOffsetY() + 'px';\n\n      if (this.overflowMode === 'Extended') {\n        popObj.element.style.minHeight = '0px';\n      }\n\n      popupNav.classList.add(CLS_TBARNAVACT);\n      popObj.show({\n        name: 'FadeIn',\n        duration: 100\n      });\n    }\n  };\n  /**\n   * To Initialize the control rendering\n   * @private\n   */\n\n\n  Toolbar.prototype.render = function () {\n    this.initialize();\n    this.renderControl();\n    this.wireEvents();\n    this.renderComplete();\n  };\n\n  Toolbar.prototype.initialize = function () {\n    var width = formatUnit(this.width);\n    var height = formatUnit(this.height);\n\n    if (Browser.info.name !== 'msie' || this.height !== 'auto' || this.overflowMode === 'MultiRow') {\n      setStyle(this.element, {\n        'height': height\n      });\n    }\n\n    setStyle(this.element, {\n      'width': width\n    });\n    var ariaAttr = {\n      'role': 'toolbar',\n      'aria-disabled': 'false',\n      'aria-haspopup': 'false',\n      'aria-orientation': !this.isVertical ? 'horizontal' : 'vertical'\n    };\n    attributes(this.element, ariaAttr);\n\n    if (this.cssClass) {\n      addClass([this.element], this.cssClass.split(' '));\n    }\n  };\n\n  Toolbar.prototype.renderControl = function () {\n    var ele = this.element;\n    this.trgtEle = ele.children.length > 0 && !isBlazor() && !this.isServerRendered ? ele.querySelector('div') : null;\n    this.tbarAlgEle = {\n      lefts: [],\n      centers: [],\n      rights: []\n    };\n    this.renderItems();\n    this.renderLayout();\n  };\n\n  Toolbar.prototype.renderLayout = function () {\n    this.renderOverflowMode();\n\n    if (this.tbarAlign) {\n      this.itemPositioning();\n    }\n\n    if (this.popObj && this.popObj.element.childElementCount > 1 && this.checkPopupRefresh(this.element, this.popObj.element)) {\n      this.popupRefresh(this.popObj.element, false);\n    }\n\n    this.separator();\n  };\n\n  Toolbar.prototype.itemsAlign = function (items, itemEleDom) {\n    var innerItem;\n    var innerPos;\n\n    if (!this.tbarEle) {\n      this.tbarEle = [];\n    }\n\n    for (var i = 0; i < items.length; i++) {\n      if (isBlazor() && this.isServerRendered) {\n        this.isVertical = this.element.classList.contains(CLS_VERTICAL) ? true : false;\n        var itemEleBlaDom = this.element.querySelector('.' + BZ_ITEMS);\n        innerItem = itemEleBlaDom.querySelector('.' + CLS_ITEM + '[data-index=\"' + i + '\"]');\n\n        if (!innerItem) {\n          continue;\n        }\n\n        if (items[i].overflow !== 'Show' && items[i].showAlwaysInPopup && !innerItem.classList.contains(CLS_SEPARATOR)) {\n          this.popupPriCount++;\n        }\n\n        if (items[i].htmlAttributes) {\n          this.setAttr(items[i].htmlAttributes, innerItem);\n        }\n\n        if (items[i].type === 'Button') {\n          EventHandler.clearEvents(innerItem);\n          EventHandler.add(innerItem, 'click', this.itemClick, this);\n        }\n      } else {\n        innerItem = this.renderSubComponent(items[i], i);\n      }\n\n      if (this.tbarEle.indexOf(innerItem) === -1) {\n        this.tbarEle.push(innerItem);\n      }\n\n      if (!this.tbarAlign) {\n        this.tbarItemAlign(items[i], itemEleDom, i);\n      }\n\n      innerPos = itemEleDom.querySelector('.e-toolbar-' + items[i].align.toLowerCase());\n\n      if (innerPos) {\n        if (!(items[i].showAlwaysInPopup && items[i].overflow !== 'Show')) {\n          this.tbarAlgEle[(items[i].align + 's').toLowerCase()].push(innerItem);\n        }\n\n        innerPos.appendChild(innerItem);\n      } else {\n        itemEleDom.appendChild(innerItem);\n      } // tslint:disable-next-line:no-any\n\n\n      if (this.isReact) {\n        this.renderReactTemplates();\n      }\n    }\n  };\n\n  Toolbar.prototype.serverItemsRerender = function () {\n    this.destroyMode();\n    this.resetServerItems();\n    this.serverItemsRefresh();\n  };\n\n  Toolbar.prototype.serverItemsRefresh = function () {\n    var wrapBlaEleDom = this.element.querySelector('.' + BZ_ITEMS);\n\n    if (wrapBlaEleDom.children.length > 0) {\n      this.itemsAlign(this.items, this.element.querySelector('.' + CLS_ITEMS));\n      this.renderLayout();\n      this.refreshOverflow();\n    }\n  };\n\n  Toolbar.prototype.resetServerItems = function () {\n    var wrapBlaEleDom = this.element.querySelector('.' + BZ_ITEMS);\n    var itemEles = [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, this.element));\n    append(itemEles, wrapBlaEleDom);\n    this.clearProperty();\n  };\n  /** @hidden */\n\n\n  Toolbar.prototype.changeOrientation = function () {\n    var ele = this.element;\n\n    if (this.isVertical) {\n      ele.classList.remove(CLS_VERTICAL);\n      this.isVertical = false;\n\n      if (this.height === 'auto' || this.height === '100%') {\n        ele.style.height = this.height;\n      }\n\n      ele.setAttribute('aria-orientation', 'horizontal');\n    } else {\n      ele.classList.add(CLS_VERTICAL);\n      this.isVertical = true;\n      ele.setAttribute('aria-orientation', 'vertical');\n      setStyle(this.element, {\n        'height': formatUnit(this.height),\n        'width': formatUnit(this.width)\n      });\n    }\n\n    this.destroyMode();\n    this.refreshOverflow();\n  };\n\n  Toolbar.prototype.initScroll = function (element, innerItems) {\n    if (!this.scrollModule && this.checkOverflow(element, innerItems[0])) {\n      if (this.tbarAlign) {\n        this.element.querySelector('.' + CLS_ITEMS + ' .' + CLS_TBARCENTER).removeAttribute('style');\n      }\n\n      if (this.isVertical) {\n        this.scrollModule = new VScroll({\n          scrollStep: this.scrollStep,\n          enableRtl: this.enableRtl\n        }, innerItems[0]);\n      } else {\n        this.scrollModule = new HScroll({\n          scrollStep: this.scrollStep,\n          enableRtl: this.enableRtl\n        }, innerItems[0]);\n      }\n\n      this.remove(this.scrollModule.element, CLS_TBARPOS);\n      setStyle(this.element, {\n        overflow: 'hidden'\n      });\n    }\n  };\n\n  Toolbar.prototype.itemWidthCal = function (items) {\n    var _this = this;\n\n    var width = 0;\n    var style;\n    [].slice.call(selectAll('.' + CLS_ITEM, items)).forEach(function (el) {\n      if (isVisible(el)) {\n        style = window.getComputedStyle(el);\n        width += _this.isVertical ? el.offsetHeight : el.offsetWidth;\n        width += parseFloat(_this.isVertical ? style.marginTop : style.marginRight);\n        width += parseFloat(_this.isVertical ? style.marginBottom : style.marginLeft);\n      }\n    });\n    return width;\n  };\n\n  Toolbar.prototype.getScrollCntEle = function (innerItem) {\n    var trgClass = this.isVertical ? '.e-vscroll-content' : '.e-hscroll-content';\n    return innerItem.querySelector(trgClass);\n  };\n\n  Toolbar.prototype.checkOverflow = function (element, innerItem) {\n    if (isNOU(element) || isNOU(innerItem) || !isVisible(element)) {\n      return false;\n    }\n\n    var eleWidth = this.isVertical ? element.offsetHeight : element.offsetWidth;\n    var itemWidth = this.isVertical ? innerItem.offsetHeight : innerItem.offsetWidth;\n\n    if (this.tbarAlign || this.scrollModule || eleWidth === itemWidth) {\n      itemWidth = this.itemWidthCal(this.scrollModule ? this.getScrollCntEle(innerItem) : innerItem);\n    }\n\n    var popNav = element.querySelector('.' + CLS_TBARNAV);\n    var scrollNav = element.querySelector('.' + CLS_TBARSCRLNAV);\n    var navEleWidth = 0;\n\n    if (popNav) {\n      navEleWidth = this.isVertical ? popNav.offsetHeight : popNav.offsetWidth;\n    } else if (scrollNav) {\n      navEleWidth = this.isVertical ? scrollNav.offsetHeight * 2 : scrollNav.offsetWidth * 2;\n    }\n\n    if (itemWidth > eleWidth - navEleWidth) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  /**\n   * Refresh the whole Toolbar component without re-rendering.\n   * - It is used to manually refresh the Toolbar overflow modes such as scrollable, popup, multi row, and extended.\n   * - It will refresh the Toolbar component after loading items dynamically.\n   * @returns void.\n   */\n\n\n  Toolbar.prototype.refreshOverflow = function () {\n    this.resize();\n  };\n\n  Toolbar.prototype.toolbarAlign = function (innerItems) {\n    if (this.tbarAlign) {\n      this.add(innerItems, CLS_TBARPOS);\n      this.itemPositioning();\n    }\n  };\n\n  Toolbar.prototype.renderOverflowMode = function () {\n    var ele = this.element;\n    var innerItems = ele.querySelector('.' + CLS_ITEMS);\n    var priorityCheck = this.popupPriCount > 0;\n\n    if (ele && ele.children.length > 0) {\n      this.offsetWid = ele.offsetWidth;\n      this.remove(this.element, 'e-toolpop');\n\n      if (Browser.info.name === 'msie' && this.height === 'auto') {\n        ele.style.height = '';\n      }\n\n      switch (this.overflowMode) {\n        case 'Scrollable':\n          if (isNOU(this.scrollModule)) {\n            this.initScroll(ele, [].slice.call(ele.getElementsByClassName(CLS_ITEMS)));\n          }\n\n          break;\n\n        case 'Popup':\n          this.add(this.element, 'e-toolpop');\n\n          if (this.tbarAlign) {\n            this.removePositioning();\n          }\n\n          if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n            this.setOverflowAttributes(ele);\n          }\n\n          this.toolbarAlign(innerItems);\n          break;\n\n        case 'MultiRow':\n          this.add(innerItems, CLS_MULTIROW);\n\n          if (this.checkOverflow(ele, innerItems) && this.tbarAlign) {\n            this.removePositioning();\n            this.add(innerItems, CLS_MULTIROWPOS);\n          }\n\n          if (ele.style.overflow === 'hidden') {\n            ele.style.overflow = '';\n          }\n\n          if (Browser.info.name === 'msie' || ele.style.height !== 'auto') {\n            ele.style.height = 'auto';\n          }\n\n          break;\n\n        case 'Extended':\n          this.add(this.element, CLS_EXTEANDABLE_TOOLBAR);\n\n          if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n            if (this.tbarAlign) {\n              this.removePositioning();\n            }\n\n            this.setOverflowAttributes(ele);\n          }\n\n          this.toolbarAlign(innerItems);\n      }\n    }\n  };\n\n  Toolbar.prototype.setOverflowAttributes = function (ele) {\n    this.createPopupEle(ele, [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, ele)));\n    this.element.querySelector('.' + CLS_TBARNAV).setAttribute('tabIndex', '0');\n    this.element.querySelector('.' + CLS_TBARNAV).setAttribute('role', 'list');\n  };\n\n  Toolbar.prototype.separator = function () {\n    var element = this.element;\n    var eleItem = [].slice.call(element.querySelectorAll('.' + CLS_SEPARATOR));\n    var eleInlineItem;\n    var multiVar = element.querySelector('.' + CLS_MULTIROW_SEPARATOR);\n    var extendVar = element.querySelector('.' + CLS_EXTENDABLE_SEPARATOR);\n    eleInlineItem = this.overflowMode === 'MultiRow' ? multiVar : extendVar;\n\n    if (eleInlineItem !== null) {\n      if (this.overflowMode === 'MultiRow') {\n        eleInlineItem.classList.remove(CLS_MULTIROW_SEPARATOR);\n      } else if (this.overflowMode === 'Extended') {\n        eleInlineItem.classList.remove(CLS_EXTENDABLE_SEPARATOR);\n      }\n    }\n\n    for (var i = 0; i <= eleItem.length - 1; i++) {\n      if (eleItem[i].offsetLeft < 30 && eleItem[i].offsetLeft !== 0) {\n        if (this.overflowMode === 'MultiRow') {\n          eleItem[i].classList.add(CLS_MULTIROW_SEPARATOR);\n        } else if (this.overflowMode === 'Extended') {\n          eleItem[i].classList.add(CLS_EXTENDABLE_SEPARATOR);\n        }\n      }\n    }\n  };\n\n  Toolbar.prototype.createPopupEle = function (ele, innerEle) {\n    var innerNav = ele.querySelector('.' + CLS_TBARNAV);\n    var vertical = this.isVertical;\n\n    if (!innerNav) {\n      this.createPopupIcon(ele);\n    }\n\n    innerNav = ele.querySelector('.' + CLS_TBARNAV);\n    var innerNavDom = vertical ? innerNav.offsetHeight : innerNav.offsetWidth;\n    var eleWidth = (vertical ? ele.offsetHeight : ele.offsetWidth) - innerNavDom;\n    this.element.classList.remove('e-rtl');\n    setStyle(this.element, {\n      direction: 'initial'\n    });\n    this.checkPriority(ele, innerEle, eleWidth, true);\n\n    if (this.enableRtl) {\n      this.element.classList.add('e-rtl');\n    }\n\n    this.element.style.removeProperty('direction');\n    this.createPopup();\n  };\n\n  Toolbar.prototype.pushingPoppedEle = function (tbarObj, popupPri, ele, eleHeight, sepHeight) {\n    var element = tbarObj.element;\n    var nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n    var nodeIndex = 0;\n    var poppedEle = [].slice.call(selectAll('.' + CLS_POPUP, element.querySelector('.' + CLS_ITEMS)));\n    var nodePri = 0;\n    poppedEle.forEach(function (el, index) {\n      nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n\n      if (el.classList.contains(CLS_TBAROVERFLOW) && nodes.length > 0) {\n        if (tbarObj.tbResize && nodes.length > index) {\n          ele.insertBefore(el, nodes[index]);\n          ++nodePri;\n        } else {\n          ele.insertBefore(el, ele.children[nodes.length]);\n          ++nodePri;\n        }\n      } else if (el.classList.contains(CLS_TBAROVERFLOW)) {\n        ele.insertBefore(el, ele.firstChild);\n        ++nodePri;\n      } else if (tbarObj.tbResize && el.classList.contains(CLS_POPOVERFLOW) && ele.children.length > 0 && nodes.length === 0) {\n        ele.insertBefore(el, ele.firstChild);\n        ++nodePri;\n      } else if (el.classList.contains(CLS_POPOVERFLOW)) {\n        popupPri.push(el);\n      } else if (tbarObj.tbResize) {\n        ele.insertBefore(el, ele.childNodes[nodeIndex + nodePri]);\n        ++nodeIndex;\n      } else {\n        ele.appendChild(el);\n      }\n\n      if (el.classList.contains(CLS_SEPARATOR)) {\n        setStyle(el, {\n          display: '',\n          height: sepHeight + 'px'\n        });\n      } else {\n        setStyle(el, {\n          display: '',\n          height: eleHeight + 'px'\n        });\n      }\n    });\n    popupPri.forEach(function (el) {\n      ele.appendChild(el);\n    });\n    var tbarEle = selectAll('.' + CLS_ITEM, element.querySelector('.' + CLS_ITEMS));\n\n    for (var i = tbarEle.length - 1; i >= 0; i--) {\n      var tbarElement = tbarEle[i];\n\n      if (tbarElement.classList.contains(CLS_SEPARATOR) && this.overflowMode !== 'Extended') {\n        setStyle(tbarElement, {\n          display: 'none'\n        });\n      } else {\n        break;\n      }\n    }\n  };\n\n  Toolbar.prototype.createPopup = function () {\n    var element = this.element;\n    var eleHeight;\n    var eleItem;\n    var sepHeight;\n    var sepItem;\n\n    if (this.overflowMode === 'Extended') {\n      sepItem = element.querySelector('.' + CLS_SEPARATOR + ':not(.' + CLS_POPUP + ')');\n      sepHeight = element.style.height === 'auto' || element.style.height === '' ? null : sepItem.offsetHeight;\n    }\n\n    eleItem = element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_POPUP + ')');\n    eleHeight = element.style.height === 'auto' || element.style.height === '' ? null : eleItem && eleItem.offsetHeight;\n    var ele;\n    var popupPri = [];\n\n    if (element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS)) {\n      ele = element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS);\n    } else {\n      var extendEle = this.createElement('div', {\n        id: element.id + '_popup',\n        className: CLS_POPUPCLASS + ' ' + CLS_EXTENDABLECLASS\n      });\n      var popupEle = this.createElement('div', {\n        id: element.id + '_popup',\n        className: CLS_POPUPCLASS\n      });\n      ele = this.overflowMode === 'Extended' ? extendEle : popupEle;\n    }\n\n    this.pushingPoppedEle(this, popupPri, ele, eleHeight, sepHeight);\n    this.popupInit(element, ele);\n  };\n\n  Toolbar.prototype.getElementOffsetY = function () {\n    return this.overflowMode === 'Extended' && window.getComputedStyle(this.element).getPropertyValue('box-sizing') === 'border-box' ? this.element.clientHeight : this.element.offsetHeight;\n  };\n\n  Toolbar.prototype.popupInit = function (element, ele) {\n    if (!this.popObj) {\n      element.appendChild(ele);\n      setStyle(this.element, {\n        overflow: ''\n      });\n      var eleStyles = window.getComputedStyle(this.element);\n      var popup = new Popup(null, {\n        relateTo: this.element,\n        offsetY: this.isVertical ? 0 : this.getElementOffsetY(),\n        enableRtl: this.enableRtl,\n        open: this.popupOpen.bind(this),\n        close: this.popupClose.bind(this),\n        collision: {\n          Y: this.enableCollision ? 'flip' : 'none'\n        },\n        position: this.enableRtl ? {\n          X: 'left',\n          Y: 'top'\n        } : {\n          X: 'right',\n          Y: 'top'\n        }\n      });\n      popup.appendTo(ele);\n\n      if (this.overflowMode === 'Extended') {\n        popup.width = parseFloat(eleStyles.width) + parseFloat(eleStyles.borderRightWidth) * 2;\n        popup.offsetX = 0;\n      }\n\n      EventHandler.add(document, 'scroll', this.docEvent.bind(this));\n      EventHandler.add(document, 'click ', this.docEvent.bind(this));\n      popup.element.style.maxHeight = popup.element.offsetHeight + 'px';\n\n      if (this.isVertical) {\n        popup.element.style.visibility = 'hidden';\n      }\n\n      if (this.isExtendedOpen) {\n        var popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n        popupNav.classList.add(CLS_TBARNAVACT);\n        classList(popupNav.firstElementChild, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n        this.element.querySelector('.' + CLS_EXTENDABLECLASS).classList.add(CLS_POPUPOPEN);\n      } else {\n        popup.hide();\n      }\n\n      this.popObj = popup;\n      this.element.setAttribute('aria-haspopup', 'true');\n    } else {\n      var popupEle = this.popObj.element;\n      setStyle(popupEle, {\n        maxHeight: '',\n        display: 'block'\n      });\n      setStyle(popupEle, {\n        maxHeight: popupEle.offsetHeight + 'px',\n        display: ''\n      });\n    }\n  };\n\n  Toolbar.prototype.tbarPopupHandler = function (isOpen) {\n    if (this.overflowMode === 'Extended') {\n      isOpen ? this.add(this.element, CLS_EXTENDEDPOPOPEN) : this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n    }\n  };\n\n  Toolbar.prototype.popupOpen = function (e) {\n    var popObj = this.popObj;\n\n    if (!this.isVertical) {\n      popObj.offsetY = this.getElementOffsetY();\n      popObj.dataBind();\n    }\n\n    var popupEle = this.popObj.element;\n    var toolEle = this.popObj.element.parentElement;\n    var popupNav = toolEle.querySelector('.' + CLS_TBARNAV);\n    setStyle(popObj.element, {\n      height: 'auto',\n      maxHeight: ''\n    });\n    popObj.element.style.maxHeight = popObj.element.offsetHeight + 'px';\n\n    if (this.overflowMode === 'Extended') {\n      popObj.element.style.minHeight = '';\n    }\n\n    var popupElePos = popupEle.offsetTop + popupEle.offsetHeight + calculatePosition(toolEle).top;\n    var popIcon = popupNav.firstElementChild;\n    popupNav.classList.add(CLS_TBARNAVACT);\n    classList(popIcon, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n    this.tbarPopupHandler(true);\n    var scrollVal = isNOU(window.scrollY) ? 0 : window.scrollY;\n\n    if (!this.isVertical && window.innerHeight + scrollVal < popupElePos && this.element.offsetTop < popupEle.offsetHeight) {\n      var overflowHeight = popupEle.offsetHeight - (popupElePos - window.innerHeight - scrollVal + 5);\n      popObj.height = overflowHeight + 'px';\n\n      for (var i = 0; i <= popupEle.childElementCount; i++) {\n        var ele = popupEle.children[i];\n\n        if (ele.offsetTop + ele.offsetHeight > overflowHeight) {\n          overflowHeight = ele.offsetTop;\n          break;\n        }\n      }\n\n      setStyle(popObj.element, {\n        maxHeight: overflowHeight + 'px'\n      });\n    } else if (this.isVertical) {\n      var tbEleData = this.element.getBoundingClientRect();\n      setStyle(popObj.element, {\n        maxHeight: tbEleData.top + this.element.offsetHeight + 'px',\n        bottom: 0,\n        visibility: ''\n      });\n    }\n\n    if (popObj) {\n      popObj.refreshPosition();\n    }\n  };\n\n  Toolbar.prototype.popupClose = function (e) {\n    var element = this.element;\n    var popupNav = element.querySelector('.' + CLS_TBARNAV);\n    var popIcon = popupNav.firstElementChild;\n    popupNav.classList.remove(CLS_TBARNAVACT);\n    classList(popIcon, [CLS_POPUPDOWN], [CLS_POPUPICON]);\n    this.tbarPopupHandler(false);\n  };\n\n  Toolbar.prototype.checkPriority = function (ele, inEle, eleWidth, pre) {\n    var popPriority = this.popupPriCount > 0;\n    var len = inEle.length;\n    var eleWid = eleWidth;\n    var eleOffset;\n    var checkoffset;\n    var sepCheck = 0;\n    var itemCount = 0;\n    var itemPopCount = 0;\n\n    var checkClass = function (ele, val) {\n      var rVal = false;\n      val.forEach(function (cls) {\n        if (ele.classList.contains(cls)) {\n          rVal = true;\n        }\n      });\n      return rVal;\n    };\n\n    for (var i = len - 1; i >= 0; i--) {\n      var mrgn = void 0;\n      var compuStyle = window.getComputedStyle(inEle[i]);\n\n      if (this.isVertical) {\n        mrgn = parseFloat(compuStyle.marginTop);\n        mrgn += parseFloat(compuStyle.marginBottom);\n      } else {\n        mrgn = parseFloat(compuStyle.marginRight);\n        mrgn += parseFloat(compuStyle.marginLeft);\n      }\n\n      var fstEleCheck = inEle[i] === this.tbarEle[0];\n\n      if (fstEleCheck) {\n        this.tbarEleMrgn = mrgn;\n      }\n\n      eleOffset = this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth;\n      var eleWid_1 = fstEleCheck ? eleOffset + mrgn : eleOffset;\n\n      if (checkClass(inEle[i], [CLS_POPPRI]) && popPriority) {\n        inEle[i].classList.add(CLS_POPUP);\n\n        if (this.isVertical) {\n          setStyle(inEle[i], {\n            display: 'none',\n            minHeight: eleWid_1 + 'px'\n          });\n        } else {\n          setStyle(inEle[i], {\n            display: 'none',\n            minWidth: eleWid_1 + 'px'\n          });\n        }\n\n        itemPopCount++;\n      }\n\n      if (this.isVertical) {\n        checkoffset = inEle[i].offsetTop + inEle[i].offsetHeight + mrgn > eleWidth;\n      } else {\n        checkoffset = inEle[i].offsetLeft + inEle[i].offsetWidth + mrgn > eleWidth;\n      }\n\n      if (checkoffset) {\n        if (inEle[i].classList.contains(CLS_SEPARATOR)) {\n          if (this.overflowMode === 'Extended') {\n            if (itemCount === itemPopCount) {\n              var sepEle = inEle[i];\n\n              if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                inEle[i].classList.add(CLS_POPUP);\n                itemPopCount++;\n              }\n            }\n\n            itemCount++;\n          } else if (this.overflowMode === 'Popup') {\n            if (sepCheck > 0 && itemCount === itemPopCount) {\n              var sepEle = inEle[i + itemCount + (sepCheck - 1)];\n\n              if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                setStyle(sepEle, {\n                  display: 'none'\n                });\n              }\n            }\n\n            sepCheck++;\n            itemCount = 0;\n            itemPopCount = 0;\n          }\n        } else {\n          itemCount++;\n        }\n\n        if (inEle[i].classList.contains(CLS_TBAROVERFLOW) && pre) {\n          eleWidth -= (this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + mrgn;\n        } else if (!checkClass(inEle[i], [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n          inEle[i].classList.add(CLS_POPUP);\n\n          if (this.isVertical) {\n            setStyle(inEle[i], {\n              display: 'none',\n              minHeight: eleWid_1 + 'px'\n            });\n          } else {\n            setStyle(inEle[i], {\n              display: 'none',\n              minWidth: eleWid_1 + 'px'\n            });\n          }\n\n          itemPopCount++;\n        } else {\n          eleWidth -= (this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + mrgn;\n        }\n      }\n    }\n\n    if (pre) {\n      var popedEle = selectAll('.' + CLS_ITEM + ':not(.' + CLS_POPUP + ')', this.element);\n      this.checkPriority(ele, popedEle, eleWid, false);\n    }\n  };\n\n  Toolbar.prototype.createPopupIcon = function (element) {\n    var id = element.id.concat('_nav');\n    var className = 'e-' + element.id.concat('_nav ' + CLS_POPUPNAV);\n    className = this.overflowMode === 'Extended' ? className + ' ' + CLS_EXTENDPOPUP : className;\n    var nav = this.createElement('div', {\n      id: id,\n      className: className\n    });\n\n    if (Browser.info.name === 'msie' || Browser.info.name === 'edge') {\n      nav.classList.add('e-ie-align');\n    }\n\n    var navItem = this.createElement('div', {\n      className: CLS_POPUPDOWN + ' e-icons'\n    });\n    nav.appendChild(navItem);\n    nav.setAttribute('tabindex', '0');\n    nav.setAttribute('role', 'list');\n    element.appendChild(nav);\n  };\n\n  Toolbar.prototype.tbarPriRef = function (inEle, indx, sepPri, el, des, elWid, wid, ig) {\n    var ignoreCount = ig;\n    var popEle = this.popObj.element;\n    var query = '.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_TBAROVERFLOW + ')';\n    var priEleCnt = selectAll('.' + CLS_POPUP + ':not(.' + CLS_TBAROVERFLOW + ')', popEle).length;\n\n    var checkClass = function (ele, val) {\n      return ele.classList.contains(val);\n    };\n\n    if (selectAll(query, inEle).length === 0) {\n      var eleSep = inEle.children[indx - (indx - sepPri) - 1];\n      var ignoreCheck = !isNOU(eleSep) && checkClass(eleSep, CLS_TBARIGNORE);\n\n      if (!isNOU(eleSep) && checkClass(eleSep, CLS_SEPARATOR) && !isVisible(eleSep) || ignoreCheck) {\n        var sepDisplay = 'none';\n        eleSep.style.display = 'inherit';\n        var eleSepWidth = eleSep.offsetWidth + parseFloat(window.getComputedStyle(eleSep).marginRight) * 2;\n        var prevSep = eleSep.previousElementSibling;\n\n        if (elWid + eleSepWidth < wid || des) {\n          inEle.insertBefore(el, inEle.children[indx + ignoreCount - (indx - sepPri)]);\n\n          if (!isNOU(prevSep)) {\n            prevSep.style.display = '';\n          }\n        } else {\n          if (prevSep.classList.contains(CLS_SEPARATOR)) {\n            prevSep.style.display = sepDisplay;\n          }\n        }\n\n        eleSep.style.display = '';\n      } else {\n        inEle.insertBefore(el, inEle.children[indx + ignoreCount - (indx - sepPri)]);\n      }\n    } else {\n      inEle.insertBefore(el, inEle.children[indx + ignoreCount - priEleCnt]);\n    }\n  };\n\n  Toolbar.prototype.popupRefresh = function (popupEle, destroy) {\n    var _this = this;\n\n    var ele = this.element;\n    var isVer = this.isVertical;\n    var popNav = ele.querySelector('.' + CLS_TBARNAV);\n    var innerEle = ele.querySelector('.' + CLS_ITEMS);\n\n    if (isNOU(popNav)) {\n      return;\n    }\n\n    innerEle.removeAttribute('style');\n    popupEle.style.display = 'block';\n    var dimension;\n\n    if (isVer) {\n      dimension = ele.offsetHeight - (popNav.offsetHeight + innerEle.offsetHeight);\n    } else {\n      dimension = ele.offsetWidth - (popNav.offsetWidth + innerEle.offsetWidth);\n    }\n\n    var popupEleWidth = 0;\n    [].slice.call(popupEle.children).forEach(function (el) {\n      popupEleWidth += _this.popupEleWidth(el);\n      setStyle(el, {\n        'position': ''\n      });\n    });\n\n    if (dimension + (isVer ? popNav.offsetHeight : popNav.offsetWidth) > popupEleWidth && this.popupPriCount === 0) {\n      destroy = true;\n    }\n\n    this.popupEleRefresh(dimension, popupEle, destroy);\n    popupEle.style.display = '';\n\n    if (popupEle.children.length === 0 && popNav && this.popObj) {\n      detach(popNav);\n      popNav = null;\n      this.popObj.destroy();\n      detach(this.popObj.element);\n      this.popObj = null;\n      ele.setAttribute('aria-haspopup', 'false');\n    }\n  };\n\n  Toolbar.prototype.ignoreEleFetch = function (index, innerEle) {\n    var ignoreEle = [].slice.call(innerEle.querySelectorAll('.' + CLS_TBARIGNORE));\n    var ignoreInx = [];\n    var count = 0;\n\n    if (ignoreEle.length > 0) {\n      ignoreEle.forEach(function (ele) {\n        ignoreInx.push([].slice.call(innerEle.children).indexOf(ele));\n      });\n    } else {\n      return 0;\n    }\n\n    ignoreInx.forEach(function (val) {\n      if (val <= index) {\n        count++;\n      }\n    });\n    return count;\n  };\n\n  Toolbar.prototype.checkPopupRefresh = function (root, popEle) {\n    popEle.style.display = 'block';\n    var elWid = this.popupEleWidth(popEle.firstElementChild);\n    popEle.firstElementChild.style.removeProperty('Position');\n    var tbarWidth = root.offsetWidth - root.querySelector('.' + CLS_TBARNAV).offsetWidth;\n    var tbarItemsWid = root.querySelector('.' + CLS_ITEMS).offsetWidth;\n    popEle.style.removeProperty('display');\n\n    if (tbarWidth > elWid + tbarItemsWid) {\n      return true;\n    }\n\n    return false;\n  };\n\n  Toolbar.prototype.popupEleWidth = function (el) {\n    el.style.position = 'absolute';\n    var elWidth = this.isVertical ? el.offsetHeight : el.offsetWidth;\n    var btnText = el.querySelector('.' + CLS_TBARBTNTEXT);\n\n    if (el.classList.contains('e-tbtn-align') || el.classList.contains(CLS_TBARTEXT)) {\n      var btn = el.children[0];\n\n      if (!isNOU(btnText) && el.classList.contains(CLS_TBARTEXT)) {\n        btnText.style.display = 'none';\n      } else if (!isNOU(btnText) && el.classList.contains(CLS_POPUPTEXT)) {\n        btnText.style.display = 'block';\n      }\n\n      btn.style.minWidth = '0%';\n      elWidth = parseFloat(!this.isVertical ? el.style.minWidth : el.style.minHeight);\n      btn.style.minWidth = '';\n      btn.style.minHeight = '';\n\n      if (!isNOU(btnText)) {\n        btnText.style.display = '';\n      }\n    }\n\n    return elWidth;\n  };\n\n  Toolbar.prototype.popupEleRefresh = function (width, popupEle, destroy) {\n    var popPriority = this.popupPriCount > 0;\n    var eleSplice = this.tbarEle;\n    var priEleCnt;\n    var index;\n    var checkOverflow;\n    var innerEle = this.element.querySelector('.' + CLS_ITEMS);\n    var ignoreCount = 0;\n\n    var _loop_1 = function (el) {\n      if (el.classList.contains(CLS_POPPRI) && popPriority && !destroy) {\n        return \"continue\";\n      }\n\n      var elWidth = this_1.popupEleWidth(el);\n\n      if (el === this_1.tbarEle[0]) {\n        elWidth += this_1.tbarEleMrgn;\n      }\n\n      el.style.position = '';\n\n      if (elWidth < width || destroy) {\n        setStyle(el, {\n          minWidth: '',\n          height: '',\n          minHeight: ''\n        });\n\n        if (!el.classList.contains(CLS_POPOVERFLOW)) {\n          el.classList.remove(CLS_POPUP);\n        }\n\n        index = this_1.tbarEle.indexOf(el);\n\n        if (this_1.tbarAlign) {\n          var pos = this_1.items[index].align;\n          index = this_1.tbarAlgEle[(pos + 's').toLowerCase()].indexOf(el);\n          eleSplice = this_1.tbarAlgEle[(pos + 's').toLowerCase()];\n          innerEle = this_1.element.querySelector('.' + CLS_ITEMS + ' .' + 'e-toolbar-' + pos.toLowerCase());\n        }\n\n        var sepBeforePri_1 = 0;\n\n        if (this_1.overflowMode !== 'Extended') {\n          eleSplice.slice(0, index).forEach(function (el) {\n            if (el.classList.contains(CLS_TBAROVERFLOW) || el.classList.contains(CLS_SEPARATOR)) {\n              if (el.classList.contains(CLS_SEPARATOR)) {\n                el.style.display = '';\n                width -= el.offsetWidth;\n              }\n\n              sepBeforePri_1++;\n            }\n          });\n        }\n\n        ignoreCount = this_1.ignoreEleFetch(index, innerEle);\n\n        if (el.classList.contains(CLS_TBAROVERFLOW)) {\n          this_1.tbarPriRef(innerEle, index, sepBeforePri_1, el, destroy, elWidth, width, ignoreCount);\n          width -= el.offsetWidth;\n        } else if (index === 0) {\n          innerEle.insertBefore(el, innerEle.firstChild);\n          width -= el.offsetWidth;\n        } else {\n          priEleCnt = selectAll('.' + CLS_TBAROVERFLOW, this_1.popObj.element).length;\n          innerEle.insertBefore(el, innerEle.children[index + ignoreCount - priEleCnt]);\n          width -= el.offsetWidth;\n        }\n\n        el.style.height = '';\n      } else {\n        return \"break\";\n      }\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, _a = [].slice.call(popupEle.children); _i < _a.length; _i++) {\n      var el = _a[_i];\n\n      var state_1 = _loop_1(el);\n\n      if (state_1 === \"break\") break;\n    }\n\n    checkOverflow = this.checkOverflow(this.element, this.element.getElementsByClassName(CLS_ITEMS)[0]);\n\n    if (checkOverflow && !destroy) {\n      this.renderOverflowMode();\n    }\n  };\n\n  Toolbar.prototype.removePositioning = function () {\n    var item = this.element.querySelector('.' + CLS_ITEMS);\n\n    if (isNOU(item) || !item.classList.contains(CLS_TBARPOS)) {\n      return;\n    }\n\n    this.remove(item, CLS_TBARPOS);\n    var innerItem = [].slice.call(item.childNodes);\n    innerItem[1].removeAttribute('style');\n    innerItem[2].removeAttribute('style');\n  };\n\n  Toolbar.prototype.refreshPositioning = function () {\n    var item = this.element.querySelector('.' + CLS_ITEMS);\n    this.add(item, CLS_TBARPOS);\n    this.itemPositioning();\n  };\n\n  Toolbar.prototype.itemPositioning = function () {\n    var item = this.element.querySelector('.' + CLS_ITEMS);\n    var margin;\n\n    if (isNOU(item) || !item.classList.contains(CLS_TBARPOS)) {\n      return;\n    }\n\n    var popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n    var innerItem;\n\n    if (this.scrollModule) {\n      var trgClass = this.isVertical ? CLS_VSCROLLCNT : CLS_HSCROLLCNT;\n      innerItem = [].slice.call(item.querySelector('.' + trgClass).children);\n    } else {\n      innerItem = [].slice.call(item.childNodes);\n    }\n\n    if (this.isVertical) {\n      margin = innerItem[0].offsetHeight + innerItem[2].offsetHeight;\n    } else {\n      margin = innerItem[0].offsetWidth + innerItem[2].offsetWidth;\n    }\n\n    var tbarWid = this.isVertical ? this.element.offsetHeight : this.element.offsetWidth;\n\n    if (popupNav) {\n      tbarWid -= this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth;\n      var popWid = (this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth) + 'px';\n      innerItem[2].removeAttribute('style');\n\n      if (this.isVertical) {\n        this.enableRtl ? innerItem[2].style.top = popWid : innerItem[2].style.bottom = popWid;\n      } else {\n        this.enableRtl ? innerItem[2].style.left = popWid : innerItem[2].style.right = popWid;\n      }\n    }\n\n    if (tbarWid <= margin) {\n      return;\n    }\n\n    var value = (tbarWid - margin - (!this.isVertical ? innerItem[1].offsetWidth : innerItem[1].offsetHeight)) / 2;\n    innerItem[1].removeAttribute('style');\n    var mrgn = (!this.isVertical ? innerItem[0].offsetWidth : innerItem[0].offsetHeight) + value + 'px';\n\n    if (this.isVertical) {\n      this.enableRtl ? innerItem[1].style.marginBottom = mrgn : innerItem[1].style.marginTop = mrgn;\n    } else {\n      this.enableRtl ? innerItem[1].style.marginRight = mrgn : innerItem[1].style.marginLeft = mrgn;\n    }\n  };\n\n  Toolbar.prototype.tbarItemAlign = function (item, itemEle, pos) {\n    var _this = this;\n\n    if (item.showAlwaysInPopup && item.overflow !== 'Show') {\n      return;\n    }\n\n    var alignDiv = [];\n    alignDiv.push(this.createElement('div', {\n      className: CLS_TBARLEFT\n    }));\n    alignDiv.push(this.createElement('div', {\n      className: CLS_TBARCENTER\n    }));\n    alignDiv.push(this.createElement('div', {\n      className: CLS_TBARRIGHT\n    }));\n\n    if (pos === 0 && item.align !== 'Left') {\n      alignDiv.forEach(function (ele) {\n        itemEle.appendChild(ele);\n      });\n      this.tbarAlign = true;\n      this.add(itemEle, CLS_TBARPOS);\n    } else if (item.align !== 'Left') {\n      var alignEle = itemEle.childNodes;\n      var leftAlign_1 = alignDiv[0];\n      [].slice.call(alignEle).forEach(function (el) {\n        _this.tbarAlgEle.lefts.push(el);\n\n        leftAlign_1.appendChild(el);\n      });\n      itemEle.appendChild(leftAlign_1);\n      itemEle.appendChild(alignDiv[1]);\n      itemEle.appendChild(alignDiv[2]);\n      this.tbarAlign = true;\n      this.add(itemEle, CLS_TBARPOS);\n    }\n  };\n\n  Toolbar.prototype.ctrlTemplate = function () {\n    var _this = this;\n\n    this.ctrlTem = this.trgtEle.cloneNode(true);\n    this.add(this.trgtEle, CLS_ITEMS);\n    this.tbarEle = [];\n    var innerEle = [].slice.call(this.trgtEle.children);\n    innerEle.forEach(function (ele) {\n      if (ele.tagName === 'DIV') {\n        _this.tbarEle.push(ele);\n\n        ele.setAttribute('aria-disabled', 'false');\n\n        _this.add(ele, CLS_ITEM);\n      }\n    });\n  };\n\n  Toolbar.prototype.renderItems = function () {\n    var ele = this.element;\n    var items = this.items;\n\n    if (this.trgtEle != null) {\n      this.ctrlTemplate();\n    } else if (ele && items.length > 0) {\n      var itemEleDom = void 0;\n\n      if (ele && ele.children.length > 0) {\n        itemEleDom = ele.querySelector('.' + CLS_ITEMS);\n      }\n\n      if (!itemEleDom) {\n        itemEleDom = this.createElement('div', {\n          className: CLS_ITEMS\n        });\n      }\n\n      this.itemsAlign(items, itemEleDom);\n      ele.appendChild(itemEleDom);\n    }\n  };\n\n  Toolbar.prototype.setAttr = function (attr, element) {\n    var key = Object.keys(attr);\n    var keyVal;\n\n    for (var i = 0; i < key.length; i++) {\n      keyVal = key[i];\n      keyVal === 'class' ? this.add(element, attr[keyVal]) : element.setAttribute(keyVal, attr[keyVal]);\n    }\n  };\n  /**\n   * Enables or disables the specified Toolbar item.\n   * @param  {number|HTMLElement|NodeList} items - DOM element or an array of items to be enabled or disabled.\n   * @param  {boolean} isEnable  - Boolean value that determines whether the command should be enabled or disabled.\n   * By default, `isEnable` is set to true.\n   * @returns void.\n   */\n\n\n  Toolbar.prototype.enableItems = function (items, isEnable) {\n    var elements = items;\n    var len = elements.length;\n    var ele;\n\n    if (isNOU(isEnable)) {\n      isEnable = true;\n    }\n\n    var enable = function (isEnable, ele) {\n      if (isEnable) {\n        ele.classList.remove(CLS_DISABLE);\n        ele.setAttribute('aria-disabled', 'false');\n      } else {\n        ele.classList.add(CLS_DISABLE);\n        ele.setAttribute('aria-disabled', 'true');\n      }\n    };\n\n    if (!isNOU(len) && len >= 1) {\n      for (var a = 0, element = [].slice.call(elements); a < len; a++) {\n        var itemElement = element[a];\n\n        if (typeof itemElement === 'number') {\n          ele = this.getElementByIndex(itemElement);\n\n          if (isNOU(ele)) {\n            return;\n          } else {\n            elements[a] = ele;\n          }\n        } else {\n          ele = itemElement;\n        }\n\n        enable(isEnable, ele);\n      }\n\n      isEnable ? removeClass(elements, CLS_DISABLE) : addClass(elements, CLS_DISABLE);\n    } else {\n      if (typeof elements === 'number') {\n        ele = this.getElementByIndex(elements);\n\n        if (isNOU(ele)) {\n          return;\n        }\n      } else {\n        ele = items;\n      }\n\n      enable(isEnable, ele);\n    }\n  };\n\n  Toolbar.prototype.getElementByIndex = function (index) {\n    if (this.tbarEle[index]) {\n      return this.tbarEle[index];\n    }\n\n    return null;\n  };\n  /**\n   * Adds new items to the Toolbar that accepts an array as Toolbar items.\n   * @param  {ItemsModel[]} items - DOM element or an array of items to be added to the Toolbar.\n   * @param  {number} index - Number value that determines where the command is to be added. By default, index is 0.\n   * @returns void.\n    */\n\n\n  Toolbar.prototype.addItems = function (items, index) {\n    var innerItems;\n    this.extendedOpen();\n    var itemsDiv = this.element.querySelector('.' + CLS_ITEMS);\n\n    if (isNOU(itemsDiv)) {\n      this.itemsRerender(items);\n      return;\n    }\n\n    var innerEle;\n    var itemAgn = 'Left';\n\n    if (isNOU(index)) {\n      index = 0;\n    }\n\n    items.forEach(function (e) {\n      if (!isNOU(e.align) && e.align !== 'Left' && itemAgn === 'Left') {\n        itemAgn = e.align;\n      }\n    });\n\n    for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n      var item = items_1[_i];\n\n      if (isNOU(item.type)) {\n        item.type = 'Button';\n      }\n\n      innerItems = selectAll('.' + CLS_ITEM, this.element);\n      item.align = itemAgn;\n      innerEle = this.renderSubComponent(item, index);\n\n      if (this.tbarEle.length >= index && innerItems.length >= 0) {\n        if (isNOU(this.scrollModule)) {\n          this.destroyMode();\n        }\n\n        var algIndex = item.align[0] === 'L' ? 0 : item.align[0] === 'C' ? 1 : 2;\n        var ele = void 0;\n\n        if (!this.tbarAlign && itemAgn !== 'Left') {\n          this.tbarItemAlign(item, itemsDiv, 1);\n          this.tbarAlign = true;\n          ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n          ele.appendChild(innerEle);\n          this.tbarAlgEle[(item.align + 's').toLowerCase()].push(innerEle);\n          this.refreshPositioning();\n        } else if (this.tbarAlign) {\n          ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n          ele.insertBefore(innerEle, ele.children[index]);\n          this.tbarAlgEle[(item.align + 's').toLowerCase()].splice(index, 0, innerEle);\n          this.refreshPositioning();\n        } else if (innerItems.length === 0) {\n          innerItems = selectAll('.' + CLS_ITEMS, this.element);\n          innerItems[0].appendChild(innerEle);\n        } else {\n          innerItems[0].parentNode.insertBefore(innerEle, innerItems[index]);\n        }\n\n        this.items.splice(index, 0, item);\n        this.tbarEle.splice(index, 0, innerEle);\n        index++;\n        this.offsetWid = itemsDiv.offsetWidth;\n      }\n    }\n\n    itemsDiv.style.width = '';\n    this.renderOverflowMode(); // tslint:disable-next-line:no-any\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  };\n  /**\n   * Removes the items from the Toolbar. Acceptable arguments are index of item/HTMLElement/node list.\n   * @param  {number|HTMLElement|NodeList|HTMLElement[]} args\n   * Index or DOM element or an Array of item which is to be removed from the Toolbar.\n   * @returns void.\n    */\n\n\n  Toolbar.prototype.removeItems = function (args) {\n    var elements = args;\n    var index;\n    var innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n\n    if (typeof elements === 'number') {\n      index = parseInt(args.toString(), 10);\n      this.removeItemByIndex(index, innerItems);\n    } else {\n      if (elements && elements.length > 1) {\n        for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n          var ele = _a[_i];\n          index = this.tbarEle.indexOf(ele);\n          this.removeItemByIndex(index, innerItems);\n          innerItems = selectAll('.' + CLS_ITEM, this.element);\n        }\n      } else {\n        var ele = elements && elements.length && elements.length === 1 ? elements[0] : args;\n        index = innerItems.indexOf(ele);\n        this.removeItemByIndex(index, innerItems);\n      }\n    }\n\n    this.resize();\n  };\n\n  Toolbar.prototype.removeItemByIndex = function (index, innerItems) {\n    if (this.tbarEle[index] && innerItems[index]) {\n      var eleIdx = this.tbarEle.indexOf(innerItems[index]);\n\n      if (this.tbarAlign) {\n        var indexAgn = void 0;\n        indexAgn = this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].indexOf(this.tbarEle[eleIdx]);\n        this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].splice(indexAgn, 1);\n      } // tslint:disable-next-line:no-any\n\n\n      if (this.isReact) {\n        this.clearTemplate();\n      }\n\n      detach(innerItems[index]);\n      this.items.splice(eleIdx, 1);\n      this.tbarEle.splice(eleIdx, 1);\n    }\n  };\n\n  Toolbar.prototype.templateRender = function (templateProp, innerEle, item, index) {\n    var itemType = item.type;\n    var eleObj = templateProp;\n    var isComponent;\n\n    if (typeof templateProp === 'object') {\n      isComponent = typeof eleObj.appendTo === 'function';\n    }\n\n    if (typeof templateProp === 'string' || !isComponent) {\n      var templateFn = void 0;\n      var val = templateProp;\n      val = typeof templateProp === 'string' ? templateProp.trim() : templateProp;\n      var e = void 0;\n\n      try {\n        if (typeof templateProp === 'object' && !isNOU(templateProp.tagName)) {\n          innerEle.appendChild(templateProp);\n        } else if (document.querySelectorAll(val).length) {\n          var ele = document.querySelector(val);\n          var tempStr = ele.outerHTML.trim();\n          innerEle.appendChild(ele);\n          ele.style.display = '';\n\n          if (!isNOU(tempStr)) {\n            this.tempId.push(val);\n          }\n        }\n      } catch (e) {\n        templateFn = templateCompiler(val);\n      }\n\n      var tempArray = void 0;\n\n      if (!isNOU(templateFn)) {\n        var toolbarTemplateID = this.element.id + index + '_template';\n        tempArray = templateFn({}, this, 'template', toolbarTemplateID, this.isStringTemplate);\n      }\n\n      if (!isNOU(tempArray) && tempArray.length > 0) {\n        [].slice.call(tempArray).forEach(function (ele) {\n          if (!isNOU(ele.tagName)) {\n            ele.style.display = '';\n          }\n\n          innerEle.appendChild(ele);\n        });\n      }\n    } else if (itemType === 'Input') {\n      var ele = this.createElement('input');\n      item.id ? ele.id = item.id : ele.id = getUniqueID('tbr-ipt');\n      innerEle.appendChild(ele);\n      eleObj.appendTo(ele);\n    }\n\n    this.add(innerEle, CLS_TEMPLATE);\n    this.tbarEle.push(innerEle);\n  };\n\n  Toolbar.prototype.buttonRendering = function (item, innerEle) {\n    var dom = this.createElement('button', {\n      className: CLS_TBARBTN\n    });\n    dom.setAttribute('type', 'button');\n    var textStr = item.text;\n    var iconCss;\n    var iconPos;\n    item.id ? dom.id = item.id : dom.id = getUniqueID('e-tbr-btn');\n    var btnTxt = this.createElement('span', {\n      className: 'e-tbar-btn-text'\n    });\n\n    if (textStr) {\n      btnTxt.innerHTML = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(textStr) : textStr;\n      dom.appendChild(btnTxt);\n      dom.classList.add('e-tbtn-txt');\n    } else {\n      this.add(innerEle, 'e-tbtn-align');\n    }\n\n    if (item.prefixIcon || item.suffixIcon) {\n      if (item.prefixIcon && item.suffixIcon || item.prefixIcon) {\n        iconCss = item.prefixIcon + ' e-icons';\n        iconPos = 'Left';\n      } else {\n        iconCss = item.suffixIcon + ' e-icons';\n        iconPos = 'Right';\n      }\n    }\n\n    var btnObj = new Button({\n      iconCss: iconCss,\n      iconPosition: iconPos\n    });\n    btnObj.createElement = this.createElement;\n    btnObj.appendTo(dom);\n\n    if (item.width) {\n      setStyle(dom, {\n        'width': formatUnit(item.width)\n      });\n    }\n\n    return dom;\n  };\n\n  Toolbar.prototype.renderSubComponent = function (item, index) {\n    var innerEle;\n    var dom;\n    innerEle = this.createElement('div', {\n      className: CLS_ITEM\n    });\n    innerEle.setAttribute('aria-disabled', 'false');\n    var tempDom = this.createElement('div', {\n      innerHTML: this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(item.tooltipText) : item.tooltipText\n    });\n\n    if (!this.tbarEle) {\n      this.tbarEle = [];\n    }\n\n    if (item.htmlAttributes) {\n      this.setAttr(item.htmlAttributes, innerEle);\n    }\n\n    if (item.tooltipText) {\n      innerEle.setAttribute('title', tempDom.textContent);\n    }\n\n    if (item.cssClass) {\n      innerEle.className = innerEle.className + ' ' + item.cssClass;\n    }\n\n    if (item.template) {\n      this.templateRender(item.template, innerEle, item, index);\n    } else {\n      switch (item.type) {\n        case 'Button':\n          dom = this.buttonRendering(item, innerEle);\n          dom.setAttribute('tabindex', '-1');\n          dom.setAttribute('aria-label', item.text || item.tooltipText);\n          innerEle.appendChild(dom);\n          innerEle.addEventListener('click', this.itemClick.bind(this));\n          break;\n\n        case 'Separator':\n          this.add(innerEle, CLS_SEPARATOR);\n          break;\n      }\n    }\n\n    if (item.showTextOn) {\n      var sTxt = item.showTextOn;\n\n      if (sTxt === 'Toolbar') {\n        this.add(innerEle, CLS_POPUPTEXT);\n        this.add(innerEle, 'e-tbtn-align');\n      } else if (sTxt === 'Overflow') {\n        this.add(innerEle, CLS_TBARTEXT);\n      }\n    }\n\n    if (item.overflow) {\n      var overflow = item.overflow;\n\n      if (overflow === 'Show') {\n        this.add(innerEle, CLS_TBAROVERFLOW);\n      } else if (overflow === 'Hide') {\n        if (!innerEle.classList.contains(CLS_SEPARATOR)) {\n          this.add(innerEle, CLS_POPOVERFLOW);\n        }\n      }\n    }\n\n    if (item.overflow !== 'Show' && item.showAlwaysInPopup && !innerEle.classList.contains(CLS_SEPARATOR)) {\n      this.add(innerEle, CLS_POPPRI);\n      this.popupPriCount++;\n    }\n\n    if (item.disabled) {\n      this.add(innerEle, CLS_DISABLE);\n    }\n\n    if (item.visible === false) {\n      this.add(innerEle, CLS_HIDDEN);\n    }\n\n    return innerEle;\n  };\n\n  Toolbar.prototype.itemClick = function (e) {\n    this.activeEleSwitch(e.currentTarget);\n  };\n\n  Toolbar.prototype.activeEleSwitch = function (ele) {\n    this.activeEleRemove(ele.firstElementChild);\n    this.activeEle.focus();\n  };\n\n  Toolbar.prototype.activeEleRemove = function (curEle) {\n    if (!isNOU(this.activeEle)) {\n      this.activeEle.setAttribute('tabindex', '-1');\n    }\n\n    this.activeEle = curEle;\n\n    if (isNOU(this.trgtEle) && !curEle.parentElement.classList.contains(CLS_TEMPLATE)) {\n      curEle.removeAttribute('tabindex');\n    } else {\n      this.activeEle.setAttribute('tabindex', '0');\n    }\n  };\n\n  Toolbar.prototype.getPersistData = function () {\n    return this.addOnPersist([]);\n  };\n  /**\n   * Returns the current module name.\n   * @returns string\n   * @private\n   */\n\n\n  Toolbar.prototype.getModuleName = function () {\n    return 'toolbar';\n  };\n\n  Toolbar.prototype.itemsRerender = function (newProp) {\n    this.items = this.tbarItemsCol; // tslint:disable-next-line:no-any\n\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    this.destroyMode();\n    this.destroyItems();\n    this.items = newProp;\n    this.tbarItemsCol = this.items;\n    this.renderItems();\n    this.renderOverflowMode(); // tslint:disable-next-line:no-any\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  };\n\n  Toolbar.prototype.resize = function () {\n    var ele = this.element;\n    this.tbResize = true;\n\n    if (this.tbarAlign) {\n      this.itemPositioning();\n    }\n\n    if (this.popObj && this.overflowMode === 'Popup') {\n      this.popObj.hide();\n    }\n\n    var checkOverflow = this.checkOverflow(ele, ele.getElementsByClassName(CLS_ITEMS)[0]);\n\n    if (!checkOverflow) {\n      this.destroyScroll();\n      var multirowele = ele.querySelector('.' + CLS_ITEMS);\n\n      if (!isNOU(multirowele)) {\n        this.remove(multirowele, CLS_MULTIROWPOS);\n\n        if (this.tbarAlign) {\n          this.add(multirowele, CLS_TBARPOS);\n        }\n      }\n    }\n\n    if (checkOverflow && this.scrollModule && this.offsetWid === ele.offsetWidth) {\n      return;\n    }\n\n    if (this.offsetWid > ele.offsetWidth || checkOverflow) {\n      this.renderOverflowMode();\n    }\n\n    if (this.popObj) {\n      if (this.overflowMode === 'Extended') {\n        var eleStyles = window.getComputedStyle(this.element);\n        this.popObj.width = parseFloat(eleStyles.width) + parseFloat(eleStyles.borderRightWidth) * 2;\n      }\n\n      if (this.tbarAlign) {\n        this.removePositioning();\n      }\n\n      this.popupRefresh(this.popObj.element, false);\n\n      if (this.tbarAlign) {\n        this.refreshPositioning();\n      }\n    }\n\n    if (this.element.querySelector('.' + CLS_HSCROLLBAR)) {\n      this.scrollStep = this.element.querySelector('.' + CLS_HSCROLLBAR).offsetWidth;\n    }\n\n    this.offsetWid = ele.offsetWidth;\n    this.tbResize = false;\n    this.separator();\n  };\n\n  Toolbar.prototype.extendedOpen = function () {\n    var sib = this.element.querySelector('.' + CLS_EXTENDABLECLASS);\n\n    if (this.overflowMode === 'Extended' && sib) {\n      this.isExtendedOpen = sib.classList.contains(CLS_POPUPOPEN);\n    }\n  };\n  /**\n   * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n   * @param  {ToolbarModel} newProp\n   * @param  {ToolbarModel} oldProp\n   * @returns void\n   * @private\n   */\n\n\n  Toolbar.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var tEle = this.element;\n    this.extendedOpen();\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'items':\n          if (!(newProp.items instanceof Array && oldProp.items instanceof Array) && !this.isServerRendered) {\n            var changedProb = Object.keys(newProp.items);\n\n            for (var i = 0; i < changedProb.length; i++) {\n              var index = parseInt(Object.keys(newProp.items)[i], 10);\n              var property = Object.keys(newProp.items[index])[0];\n              var newProperty = Object(newProp.items[index])[property];\n\n              if (this.tbarAlign || property === 'align') {\n                this.refresh();\n                this.trigger('created');\n                break;\n              }\n\n              var popupPriCheck = property === 'showAlwaysInPopup' && !newProperty;\n              var booleanCheck = property === 'overflow' && this.popupPriCount !== 0;\n\n              if (popupPriCheck || this.items[index].showAlwaysInPopup && booleanCheck) {\n                --this.popupPriCount;\n              }\n\n              if (isNOU(this.scrollModule)) {\n                this.destroyMode();\n              }\n\n              var itemCol = [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, tEle)); // tslint:disable-next-line:no-any\n\n              if (this.isReact) {\n                this.clearTemplate();\n              }\n\n              detach(itemCol[index]);\n              this.tbarEle.splice(index, 1);\n              this.addItems([this.items[index]], index);\n              this.items.splice(index, 1);\n\n              if (this.items[index].template) {\n                this.tbarEle.splice(this.items.length, 1);\n              }\n            }\n          } else if (isBlazor() && this.isServerRendered) {\n            this.serverItemsRerender();\n            this.notify('onItemsChanged', {});\n          } else {\n            this.itemsRerender(newProp.items);\n          }\n\n          break;\n\n        case 'width':\n          var wid = tEle.offsetWidth;\n          setStyle(tEle, {\n            'width': formatUnit(newProp.width)\n          });\n          this.renderOverflowMode();\n\n          if (this.popObj && wid < tEle.offsetWidth) {\n            this.popupRefresh(this.popObj.element, false);\n          }\n\n          break;\n\n        case 'height':\n          setStyle(this.element, {\n            'height': formatUnit(newProp.height)\n          });\n          break;\n\n        case 'overflowMode':\n          this.destroyMode();\n          this.renderOverflowMode();\n\n          if (this.enableRtl) {\n            this.add(tEle, CLS_RTL);\n          }\n\n          this.refreshOverflow();\n          break;\n\n        case 'enableRtl':\n          newProp.enableRtl ? this.add(tEle, CLS_RTL) : this.remove(tEle, CLS_RTL);\n\n          if (!isNOU(this.scrollModule)) {\n            newProp.enableRtl ? this.add(this.scrollModule.element, CLS_RTL) : this.remove(this.scrollModule.element, CLS_RTL);\n          }\n\n          if (!isNOU(this.popObj)) {\n            newProp.enableRtl ? this.add(this.popObj.element, CLS_RTL) : this.remove(this.popObj.element, CLS_RTL);\n          }\n\n          if (this.tbarAlign) {\n            this.itemPositioning();\n          }\n\n          break;\n\n        case 'scrollStep':\n          if (this.scrollModule) {\n            this.scrollModule.scrollStep = this.scrollStep;\n          }\n\n          break;\n\n        case 'enableCollision':\n          if (this.popObj) {\n            this.popObj.collision = {\n              Y: this.enableCollision ? 'flip' : 'none'\n            };\n          }\n\n          break;\n\n        case 'cssClass':\n          if (oldProp.cssClass) {\n            removeClass([this.element], oldProp.cssClass.split(' '));\n          }\n\n          if (newProp.cssClass) {\n            addClass([this.element], newProp.cssClass.split(' '));\n          }\n\n          break;\n\n        case 'allowKeyboard':\n          this.unwireKeyboardEvent();\n\n          if (newProp.allowKeyboard) {\n            this.wireKeyboardEvent();\n          }\n\n          break;\n      }\n    }\n  };\n  /**\n   * Shows or hides the Toolbar item that is in the specified index.\n   * @param  {number | HTMLElement} index - Index value of target item or DOM element  of items to be hidden or shown.\n   * @param  {boolean} value - Based on this Boolean value, item will be hide (true) or show (false). By default, value is false.\n   * @returns void.\n   */\n\n\n  Toolbar.prototype.hideItem = function (index, value) {\n    var isElement = typeof index === 'object' ? true : false;\n    var eleIndex = index;\n    var initIndex;\n    var ele;\n    var innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n\n    if (isElement) {\n      ele = index;\n    } else if (this.tbarEle[eleIndex]) {\n      var innerItems_1 = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n      ele = innerItems_1[eleIndex];\n    }\n\n    if (ele) {\n      value ? ele.classList.add(CLS_HIDDEN) : ele.classList.remove(CLS_HIDDEN);\n\n      if (value && isNOU(this.element.getAttribute('tabindex')) && !ele.classList.contains(CLS_SEPARATOR)) {\n        if (isNOU(ele.firstElementChild.getAttribute('tabindex'))) {\n          ele.firstElementChild.setAttribute('tabindex', '-1');\n          var innerItems_2 = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n\n          if (isElement) {\n            eleIndex = innerItems_2.indexOf(ele);\n          }\n\n          var nextEle = innerItems_2[++eleIndex];\n\n          while (nextEle) {\n            var skipEle = this.eleContains(nextEle);\n\n            if (!skipEle) {\n              nextEle.firstElementChild.removeAttribute('tabindex');\n              break;\n            }\n\n            nextEle = innerItems_2[++eleIndex];\n          }\n        }\n      } else if (isNOU(this.element.getAttribute('tabindex')) && !ele.classList.contains(CLS_SEPARATOR)) {\n        initIndex = 0;\n        var setFlag = false;\n        var removeFlag = false;\n        var initELe = innerItems[initIndex];\n\n        while (initELe) {\n          if (!initELe.classList.contains(CLS_SEPARATOR)) {\n            if (isNOU(initELe.firstElementChild.getAttribute('tabindex'))) {\n              initELe.firstElementChild.setAttribute('tabindex', '-1');\n              setFlag = true;\n            } else {\n              if (setFlag && removeFlag) {\n                break;\n              }\n\n              var skipEle = this.eleContains(initELe);\n\n              if (!skipEle) {\n                initELe.firstElementChild.removeAttribute('tabindex');\n                removeFlag = true;\n              }\n\n              initELe = innerItems[++initIndex];\n            }\n          } else {\n            initELe = innerItems[++initIndex];\n          }\n        }\n      }\n\n      this.refreshOverflow();\n    }\n  };\n\n  __decorate([Collection([], Item)], Toolbar.prototype, \"items\", void 0);\n\n  __decorate([Property('auto')], Toolbar.prototype, \"width\", void 0);\n\n  __decorate([Property('auto')], Toolbar.prototype, \"height\", void 0);\n\n  __decorate([Property('')], Toolbar.prototype, \"cssClass\", void 0);\n\n  __decorate([Property('Scrollable')], Toolbar.prototype, \"overflowMode\", void 0);\n\n  __decorate([Property()], Toolbar.prototype, \"scrollStep\", void 0);\n\n  __decorate([Property(true)], Toolbar.prototype, \"enableCollision\", void 0);\n\n  __decorate([Property(true)], Toolbar.prototype, \"enableHtmlSanitizer\", void 0);\n\n  __decorate([Property(true)], Toolbar.prototype, \"allowKeyboard\", void 0);\n\n  __decorate([Event()], Toolbar.prototype, \"clicked\", void 0);\n\n  __decorate([Event()], Toolbar.prototype, \"created\", void 0);\n\n  __decorate([Event()], Toolbar.prototype, \"destroyed\", void 0);\n\n  __decorate([Event()], Toolbar.prototype, \"beforeCreate\", void 0);\n\n  Toolbar = __decorate([NotifyPropertyChanges], Toolbar);\n  return Toolbar;\n}(Component);\n\nexport { Toolbar };","map":{"version":3,"sources":["D:/Projects/TCC/schedule/node_modules/@syncfusion/ej2-navigations/src/toolbar/toolbar.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","EventHandler","Property","Event","append","addClass","removeClass","isVisible","closest","attributes","detach","classList","KeyboardEvents","selectAll","setStyleAttribute","setStyle","isNullOrUndefined","isNOU","getUniqueID","formatUnit","Collection","compile","templateCompiler","NotifyPropertyChanges","ChildProperty","Browser","SanitizeHtmlHelper","isBlazor","Popup","calculatePosition","Button","HScroll","VScroll","CLS_VERTICAL","CLS_ITEMS","BZ_ITEMS","CLS_ITEM","CLS_RTL","CLS_SEPARATOR","CLS_POPUPICON","CLS_POPUPDOWN","CLS_POPUPOPEN","CLS_TEMPLATE","CLS_DISABLE","CLS_POPUPTEXT","CLS_TBARTEXT","CLS_TBAROVERFLOW","CLS_POPOVERFLOW","CLS_TBARBTN","CLS_TBARNAV","CLS_TBARSCRLNAV","CLS_TBARRIGHT","CLS_TBARLEFT","CLS_TBARCENTER","CLS_TBARPOS","CLS_HSCROLLCNT","CLS_VSCROLLCNT","CLS_HSCROLLBAR","CLS_POPUPNAV","CLS_POPUPCLASS","CLS_POPUP","CLS_TBARBTNTEXT","CLS_TBARNAVACT","CLS_TBARIGNORE","CLS_POPPRI","CLS_HIDDEN","CLS_MULTIROW","CLS_MULTIROWPOS","CLS_MULTIROW_SEPARATOR","CLS_EXTENDABLE_SEPARATOR","CLS_EXTEANDABLE_TOOLBAR","CLS_EXTENDABLECLASS","CLS_EXTENDPOPUP","CLS_EXTENDEDPOPOPEN","Item","_super","apply","Toolbar","options","element","_this","call","resizeContext","resize","bind","keyConfigs","moveLeft","moveRight","moveUp","moveDown","popupOpen","popupClose","tab","home","end","destroy","isReact","clearTemplate","unwireEvents","tempId","forEach","ele","querySelector","document","body","appendChild","style","display","isServerRendered","resetServerItems","lastElementChild","contains","removeChild","trgtEle","ctrlTem","clearProperty","popObj","tbarAlign","remove","cssClass","split","removeAttribute","attrb","preRender","eventArgs","enableCollision","scrollStep","trigger","scrollModule","tbarItemsCol","items","isVertical","isExtendedOpen","popupPriCount","enableRtl","add","wireEvents","clickHandler","window","addEventListener","allowKeyboard","wireKeyboardEvent","keyModule","keyAction","keyActionHandler","docKeyDown","setAttribute","unwireKeyboardEvent","e","tagName","popCheck","overflowMode","keyCode","hide","name","duration","keyCheck","preventDefault","destroyScroll","removeEventListener","docEvent","tbarEle","tbarAlgEle","lefts","centers","rights","popEle","destroyItems","slice","querySelectorAll","el","tbarItems","children","destroyMode","tempEle","popupRefresh","val","elementFocus","fChild","firstElementChild","focus","activeEleSwitch","clstElement","tbrNavChk","trgt","clst","keyHandling","navChk","scrollChk","rootEle","popAnimate","action","eleFocus","nodes","popupCheck","value","popFrstEle","ele_1","activeEle","activeEleRemove","top","offsetHeight","show","tbarScrollChk","disable","id","eleContains","getAttribute","pos","sib","skipEle","elem","parentElement","clsList","isPopupElement","popupNav","popupClickHandler","itemObj","tempItem","indexOf","text","width","showAlwaysInPopup","disabled","prefixIcon","suffixIcon","visible","overflow","template","type","showTextOn","htmlAttributes","tooltipText","align","click","originalEvent","item","cancel","clickedArgs","position","X","Y","offsetX","dataBind","refreshPosition","getElementOffsetY","minHeight","render","initialize","renderControl","renderComplete","height","info","ariaAttr","renderItems","renderLayout","renderOverflowMode","itemPositioning","childElementCount","checkPopupRefresh","separator","itemsAlign","itemEleDom","innerItem","innerPos","itemEleBlaDom","setAttr","clearEvents","itemClick","renderSubComponent","push","tbarItemAlign","toLowerCase","renderReactTemplates","serverItemsRerender","serverItemsRefresh","wrapBlaEleDom","refreshOverflow","itemEles","changeOrientation","initScroll","innerItems","checkOverflow","itemWidthCal","getComputedStyle","offsetWidth","parseFloat","marginTop","marginRight","marginBottom","marginLeft","getScrollCntEle","trgClass","eleWidth","itemWidth","popNav","scrollNav","navEleWidth","toolbarAlign","priorityCheck","offsetWid","getElementsByClassName","removePositioning","setOverflowAttributes","createPopupEle","eleItem","eleInlineItem","multiVar","extendVar","offsetLeft","innerEle","innerNav","vertical","createPopupIcon","innerNavDom","direction","checkPriority","removeProperty","createPopup","pushingPoppedEle","tbarObj","popupPri","eleHeight","sepHeight","nodeIndex","poppedEle","nodePri","index","tbResize","insertBefore","firstChild","childNodes","tbarElement","sepItem","extendEle","createElement","className","popupEle","popupInit","getPropertyValue","clientHeight","eleStyles","popup","relateTo","offsetY","open","close","collision","appendTo","borderRightWidth","maxHeight","visibility","tbarPopupHandler","isOpen","toolEle","popupElePos","offsetTop","popIcon","scrollVal","scrollY","innerHeight","overflowHeight","tbEleData","getBoundingClientRect","bottom","inEle","pre","popPriority","len","eleWid","eleOffset","checkoffset","sepCheck","itemCount","itemPopCount","checkClass","rVal","cls","mrgn","compuStyle","fstEleCheck","tbarEleMrgn","eleWid_1","minWidth","sepEle","popedEle","concat","nav","navItem","tbarPriRef","indx","sepPri","des","elWid","wid","ig","ignoreCount","query","priEleCnt","eleSep","ignoreCheck","sepDisplay","eleSepWidth","prevSep","previousElementSibling","isVer","dimension","popupEleWidth","popupEleRefresh","ignoreEleFetch","ignoreEle","ignoreInx","count","root","tbarWidth","tbarItemsWid","elWidth","btnText","btn","eleSplice","_loop_1","this_1","sepBeforePri_1","_i","_a","state_1","refreshPositioning","margin","tbarWid","popWid","left","right","itemEle","alignDiv","alignEle","leftAlign_1","ctrlTemplate","cloneNode","attr","keys","keyVal","enableItems","isEnable","elements","enable","a","itemElement","getElementByIndex","addItems","extendedOpen","itemsDiv","itemsRerender","itemAgn","items_1","algIndex","splice","parentNode","removeItems","args","parseInt","toString","removeItemByIndex","eleIdx","indexAgn","templateRender","templateProp","itemType","eleObj","isComponent","templateFn","trim","tempStr","outerHTML","tempArray","toolbarTemplateID","isStringTemplate","buttonRendering","dom","textStr","iconCss","iconPos","btnTxt","innerHTML","enableHtmlSanitizer","sanitize","btnObj","iconPosition","tempDom","textContent","sTxt","currentTarget","curEle","getPersistData","addOnPersist","getModuleName","newProp","multirowele","onPropertyChanged","oldProp","tEle","prop","changedProb","property","newProperty","refresh","popupPriCheck","booleanCheck","itemCol","notify","hideItem","isElement","eleIndex","initIndex","innerItems_1","innerItems_2","nextEle","setFlag","removeFlag","initELe"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, EventHandler, Property, Event, append } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, isVisible, closest, attributes, detach, classList, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { selectAll, setStyleAttribute as setStyle } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined as isNOU, getUniqueID, formatUnit, Collection, compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, ChildProperty, Browser, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { isBlazor } from '@syncfusion/ej2-base';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { HScroll } from '../common/h-scroll';\nimport { VScroll } from '../common/v-scroll';\nvar CLS_VERTICAL = 'e-vertical';\nvar CLS_ITEMS = 'e-toolbar-items';\nvar BZ_ITEMS = 'e-blazor-toolbar-items';\nvar CLS_ITEM = 'e-toolbar-item';\nvar CLS_RTL = 'e-rtl';\nvar CLS_SEPARATOR = 'e-separator';\nvar CLS_POPUPICON = 'e-popup-up-icon';\nvar CLS_POPUPDOWN = 'e-popup-down-icon';\nvar CLS_POPUPOPEN = 'e-popup-open';\nvar CLS_TEMPLATE = 'e-template';\nvar CLS_DISABLE = 'e-overlay';\nvar CLS_POPUPTEXT = 'e-toolbar-text';\nvar CLS_TBARTEXT = 'e-popup-text';\nvar CLS_TBAROVERFLOW = 'e-overflow-show';\nvar CLS_POPOVERFLOW = 'e-overflow-hide';\nvar CLS_TBARBTN = 'e-tbar-btn';\nvar CLS_TBARNAV = 'e-hor-nav';\nvar CLS_TBARSCRLNAV = 'e-scroll-nav';\nvar CLS_TBARRIGHT = 'e-toolbar-right';\nvar CLS_TBARLEFT = 'e-toolbar-left';\nvar CLS_TBARCENTER = 'e-toolbar-center';\nvar CLS_TBARPOS = 'e-tbar-pos';\nvar CLS_HSCROLLCNT = 'e-hscroll-content';\nvar CLS_VSCROLLCNT = 'e-vscroll-content';\nvar CLS_HSCROLLBAR = 'e-hscroll-bar';\nvar CLS_POPUPNAV = 'e-hor-nav';\nvar CLS_POPUPCLASS = 'e-toolbar-pop';\nvar CLS_POPUP = 'e-toolbar-popup';\nvar CLS_TBARBTNTEXT = 'e-tbar-btn-text';\nvar CLS_TBARNAVACT = 'e-nav-active';\nvar CLS_TBARIGNORE = 'e-ignore';\nvar CLS_POPPRI = 'e-popup-alone';\nvar CLS_HIDDEN = 'e-hidden';\nvar CLS_MULTIROW = 'e-toolbar-multirow';\nvar CLS_MULTIROWPOS = 'e-multirow-pos';\nvar CLS_MULTIROW_SEPARATOR = 'e-multirow-separator';\nvar CLS_EXTENDABLE_SEPARATOR = 'e-extended-separator';\nvar CLS_EXTEANDABLE_TOOLBAR = 'e-extended-toolbar';\nvar CLS_EXTENDABLECLASS = 'e-toolbar-extended';\nvar CLS_EXTENDPOPUP = 'e-expended-nav';\nvar CLS_EXTENDEDPOPOPEN = 'e-tbar-extended';\n/**\n * An item object that is used to configure Toolbar commands.\n */\nvar Item = /** @class */ (function (_super) {\n    __extends(Item, _super);\n    function Item() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], Item.prototype, \"id\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"text\", void 0);\n    __decorate([\n        Property('auto')\n    ], Item.prototype, \"width\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], Item.prototype, \"showAlwaysInPopup\", void 0);\n    __decorate([\n        Property(false)\n    ], Item.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"prefixIcon\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"suffixIcon\", void 0);\n    __decorate([\n        Property(true)\n    ], Item.prototype, \"visible\", void 0);\n    __decorate([\n        Property('None')\n    ], Item.prototype, \"overflow\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"template\", void 0);\n    __decorate([\n        Property('Button')\n    ], Item.prototype, \"type\", void 0);\n    __decorate([\n        Property('Both')\n    ], Item.prototype, \"showTextOn\", void 0);\n    __decorate([\n        Property(null)\n    ], Item.prototype, \"htmlAttributes\", void 0);\n    __decorate([\n        Property('')\n    ], Item.prototype, \"tooltipText\", void 0);\n    __decorate([\n        Property('Left')\n    ], Item.prototype, \"align\", void 0);\n    __decorate([\n        Event()\n    ], Item.prototype, \"click\", void 0);\n    return Item;\n}(ChildProperty));\nexport { Item };\n/**\n * The Toolbar control contains a group of commands that are aligned horizontally.\n * ```html\n * <div id=\"toolbar\"/>\n * <script>\n *   var toolbarObj = new Toolbar();\n *   toolbarObj.appendTo(\"#toolbar\");\n * </script>\n * ```\n */\nvar Toolbar = /** @class */ (function (_super) {\n    __extends(Toolbar, _super);\n    /**\n     * Initializes a new instance of the Toolbar class.\n     * @param options  - Specifies Toolbar model properties as options.\n     * @param element  - Specifies the element that is rendered as a Toolbar.\n     */\n    function Toolbar(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.resizeContext = _this.resize.bind(_this);\n        /**\n         * Contains the keyboard configuration of the Toolbar.\n         */\n        _this.keyConfigs = {\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            moveDown: 'downarrow',\n            popupOpen: 'enter',\n            popupClose: 'escape',\n            tab: 'tab',\n            home: 'home',\n            end: 'end',\n        };\n        return _this;\n    }\n    /**\n     * Removes the control from the DOM and also removes all its related events.\n     * @returns void.\n     */\n    Toolbar.prototype.destroy = function () {\n        var _this = this;\n        // tslint:disable-next-line:no-any\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        _super.prototype.destroy.call(this);\n        this.unwireEvents();\n        this.tempId.forEach(function (ele) {\n            if (!isNOU(_this.element.querySelector(ele))) {\n                document.body.appendChild(_this.element.querySelector(ele)).style.display = 'none';\n            }\n        });\n        if (isBlazor() && this.isServerRendered) {\n            this.resetServerItems();\n        }\n        while (this.element.lastElementChild && !this.element.lastElementChild.classList.contains(BZ_ITEMS)) {\n            this.element.removeChild(this.element.lastElementChild);\n        }\n        if (this.trgtEle) {\n            this.element.appendChild(this.ctrlTem);\n        }\n        this.clearProperty();\n        this.popObj = null;\n        this.tbarAlign = null;\n        this.remove(this.element, 'e-toolpop');\n        if (this.cssClass) {\n            removeClass([this.element], this.cssClass.split(' '));\n        }\n        this.element.removeAttribute('style');\n        ['aria-disabled', 'aria-orientation', 'aria-haspopup', 'role'].forEach(function (attrb) {\n            return _this.element.removeAttribute(attrb);\n        });\n    };\n    /**\n     * Initialize the event handler\n     * @private\n     */\n    Toolbar.prototype.preRender = function () {\n        var eventArgs = { enableCollision: this.enableCollision, scrollStep: this.scrollStep };\n        this.trigger('beforeCreate', eventArgs);\n        this.enableCollision = eventArgs.enableCollision;\n        this.scrollStep = eventArgs.scrollStep;\n        this.scrollModule = null;\n        this.popObj = null;\n        this.tempId = [];\n        this.tbarItemsCol = this.items;\n        this.isVertical = this.element.classList.contains(CLS_VERTICAL) ? true : false;\n        this.isExtendedOpen = false;\n        this.popupPriCount = 0;\n        if (this.enableRtl) {\n            this.add(this.element, CLS_RTL);\n        }\n    };\n    Toolbar.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'click', this.clickHandler, this);\n        window.addEventListener('resize', this.resizeContext);\n        if (this.allowKeyboard) {\n            this.wireKeyboardEvent();\n        }\n    };\n    Toolbar.prototype.wireKeyboardEvent = function () {\n        this.keyModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs\n        });\n        EventHandler.add(this.element, 'keydown', this.docKeyDown, this);\n        this.element.setAttribute('tabIndex', '0');\n    };\n    Toolbar.prototype.unwireKeyboardEvent = function () {\n        if (this.keyModule) {\n            EventHandler.remove(this.element, 'keydown', this.docKeyDown);\n            this.keyModule.destroy();\n            this.keyModule = null;\n        }\n    };\n    Toolbar.prototype.docKeyDown = function (e) {\n        if (e.target.tagName === 'INPUT') {\n            return;\n        }\n        var popCheck = !isNOU(this.popObj) && isVisible(this.popObj.element) && this.overflowMode !== 'Extended';\n        if (e.keyCode === 9 && e.target.classList.contains('e-hor-nav') === true && popCheck) {\n            this.popObj.hide({ name: 'FadeOut', duration: 100 });\n        }\n        var keyCheck = (e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 35 || e.keyCode === 36);\n        if (keyCheck) {\n            e.preventDefault();\n        }\n    };\n    Toolbar.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.clickHandler);\n        this.destroyScroll();\n        this.unwireKeyboardEvent();\n        window.removeEventListener('resize', this.resizeContext);\n        EventHandler.remove(document, 'scroll', this.docEvent);\n        EventHandler.remove(document, 'click', this.docEvent);\n    };\n    Toolbar.prototype.clearProperty = function () {\n        this.tbarEle = [];\n        this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n    };\n    Toolbar.prototype.docEvent = function (e) {\n        var popEle = closest(e.target, '.e-popup');\n        if (this.popObj && isVisible(this.popObj.element) && !popEle && this.overflowMode === 'Popup') {\n            this.popObj.hide({ name: 'FadeOut', duration: 100 });\n        }\n    };\n    Toolbar.prototype.destroyScroll = function () {\n        if (this.scrollModule) {\n            if (this.tbarAlign) {\n                this.add(this.scrollModule.element, CLS_TBARPOS);\n            }\n            this.scrollModule.destroy();\n            this.scrollModule = null;\n        }\n    };\n    Toolbar.prototype.destroyItems = function () {\n        [].slice.call(this.element.querySelectorAll('.' + CLS_ITEM)).forEach(function (el) {\n            detach(el);\n        });\n        var tbarItems = this.element.querySelector('.' + CLS_ITEMS);\n        if (this.tbarAlign) {\n            [].slice.call(tbarItems.children).forEach(function (el) {\n                detach(el);\n            });\n            this.tbarAlign = false;\n            this.remove(tbarItems, CLS_TBARPOS);\n        }\n        this.clearProperty();\n    };\n    Toolbar.prototype.destroyMode = function () {\n        if (this.scrollModule) {\n            this.remove(this.scrollModule.element, CLS_RTL);\n            this.destroyScroll();\n        }\n        this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n        this.remove(this.element, CLS_EXTEANDABLE_TOOLBAR);\n        var tempEle = this.element.querySelector('.e-toolbar-multirow');\n        if (tempEle) {\n            this.remove(tempEle, CLS_MULTIROW);\n        }\n        if (this.popObj) {\n            this.popupRefresh(this.popObj.element, true);\n        }\n    };\n    Toolbar.prototype.add = function (ele, val) {\n        ele.classList.add(val);\n    };\n    Toolbar.prototype.remove = function (ele, val) {\n        ele.classList.remove(val);\n    };\n    Toolbar.prototype.elementFocus = function (ele) {\n        var fChild = ele.firstElementChild;\n        if (fChild) {\n            fChild.focus();\n            this.activeEleSwitch(ele);\n        }\n        else {\n            ele.focus();\n        }\n    };\n    Toolbar.prototype.clstElement = function (tbrNavChk, trgt) {\n        var clst;\n        if (tbrNavChk && this.popObj && isVisible(this.popObj.element)) {\n            clst = this.popObj.element.querySelector('.' + CLS_ITEM);\n        }\n        else if (this.element === trgt || tbrNavChk) {\n            // tslint:disable-next-line:max-line-length\n            clst = this.element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_DISABLE + ' ):not(.' + CLS_SEPARATOR + ' ):not(.' + CLS_HIDDEN + ' )');\n        }\n        else {\n            clst = closest(trgt, '.' + CLS_ITEM);\n        }\n        return clst;\n    };\n    Toolbar.prototype.keyHandling = function (clst, e, trgt, navChk, scrollChk) {\n        var popObj = this.popObj;\n        var rootEle = this.element;\n        var popAnimate = { name: 'FadeOut', duration: 100 };\n        switch (e.action) {\n            case 'moveRight':\n                if (this.isVertical) {\n                    return;\n                }\n                if (rootEle === trgt) {\n                    this.elementFocus(clst);\n                }\n                else if (!navChk) {\n                    this.eleFocus(clst, 'next');\n                }\n                break;\n            case 'moveLeft':\n                if (this.isVertical) {\n                    return;\n                }\n                if (!navChk) {\n                    this.eleFocus(clst, 'previous');\n                }\n                break;\n            case 'home':\n            case 'end':\n                var ele = void 0;\n                var nodes = void 0;\n                if (clst) {\n                    var popupCheck = closest(clst, '.e-popup');\n                    if (popupCheck) {\n                        if (isVisible(this.popObj.element)) {\n                            nodes = [].slice.call(popupCheck.children);\n                            if (e.action === 'home') {\n                                ele = nodes[0];\n                            }\n                            else {\n                                ele = nodes[nodes.length - 1];\n                            }\n                        }\n                    }\n                    else {\n                        nodes = this.element.querySelectorAll('.' + CLS_ITEMS + ' .' + CLS_ITEM);\n                        if (e.action === 'home') {\n                            ele = nodes[0];\n                        }\n                        else {\n                            ele = nodes[nodes.length - 1];\n                        }\n                    }\n                    if (ele) {\n                        this.elementFocus(ele);\n                    }\n                }\n                break;\n            case 'moveUp':\n            case 'moveDown':\n                var value = e.action === 'moveUp' ? 'previous' : 'next';\n                if (!this.isVertical) {\n                    if (popObj && closest(trgt, '.e-popup')) {\n                        var popEle = popObj.element;\n                        var popFrstEle = popEle.firstElementChild;\n                        if ((value === 'previous' && popFrstEle === clst) || (value === 'next' && popEle.lastElementChild === clst)) {\n                            return;\n                        }\n                        else {\n                            this.eleFocus(clst, value);\n                        }\n                    }\n                    else if (e.action === 'moveDown' && popObj && isVisible(popObj.element)) {\n                        this.elementFocus(clst);\n                    }\n                }\n                else {\n                    if (e.action === 'moveUp') {\n                        this.eleFocus(clst, 'previous');\n                    }\n                    else {\n                        this.eleFocus(clst, 'next');\n                    }\n                }\n                break;\n            case 'tab':\n                if (!scrollChk && !navChk) {\n                    var ele_1 = clst.firstElementChild;\n                    if (rootEle === trgt) {\n                        if (this.activeEle) {\n                            this.activeEle.focus();\n                        }\n                        else {\n                            this.activeEleRemove(ele_1);\n                            ele_1.focus();\n                        }\n                        this.element.removeAttribute('tabindex');\n                    }\n                }\n                break;\n            case 'popupClose':\n                if (popObj && this.overflowMode !== 'Extended') {\n                    popObj.hide(popAnimate);\n                }\n                break;\n            case 'popupOpen':\n                if (!navChk) {\n                    return;\n                }\n                if (popObj && !isVisible(popObj.element)) {\n                    popObj.element.style.top = rootEle.offsetHeight + 'px';\n                    popObj.show({ name: 'FadeIn', duration: 100 });\n                }\n                else {\n                    popObj.hide(popAnimate);\n                }\n                break;\n        }\n    };\n    Toolbar.prototype.keyActionHandler = function (e) {\n        var trgt = e.target;\n        if (trgt.tagName === 'INPUT' || trgt.tagName === 'TEXTAREA' || this.element.classList.contains(CLS_DISABLE)) {\n            return;\n        }\n        e.preventDefault();\n        var clst;\n        var tbrNavChk = trgt.classList.contains(CLS_TBARNAV);\n        var tbarScrollChk = trgt.classList.contains(CLS_TBARSCRLNAV);\n        clst = this.clstElement(tbrNavChk, trgt);\n        if (clst || tbarScrollChk) {\n            this.keyHandling(clst, e, trgt, tbrNavChk, tbarScrollChk);\n        }\n    };\n    /**\n     * Specifies the value to disable/enable the Toolbar component.\n     * When set to `true`, the component will be disabled.\n     * @param  {boolean} value - Based on this Boolean value, Toolbar will be enabled (false) or disabled (true).\n     * @returns void.\n     */\n    Toolbar.prototype.disable = function (value) {\n        var rootEle = this.element;\n        value ? rootEle.classList.add(CLS_DISABLE) : rootEle.classList.remove(CLS_DISABLE);\n        rootEle.setAttribute('tabindex', !value ? '0' : '-1');\n        if (this.activeEle) {\n            this.activeEle.setAttribute('tabindex', !value ? '0' : '-1');\n        }\n        if (this.scrollModule) {\n            this.scrollModule.disable(value);\n        }\n        if (this.popObj) {\n            if (isVisible(this.popObj.element) && this.overflowMode !== 'Extended') {\n                this.popObj.hide();\n            }\n            rootEle.querySelector('#' + rootEle.id + '_nav').setAttribute('tabindex', !value ? '0' : '-1');\n        }\n    };\n    Toolbar.prototype.eleContains = function (el) {\n        // tslint:disable-next-line:max-line-length\n        return el.classList.contains(CLS_SEPARATOR) || el.classList.contains(CLS_DISABLE) || el.getAttribute('disabled') || el.classList.contains(CLS_HIDDEN) || !isVisible(el);\n        // tslint:enable-next-line:max-line-length\n    };\n    Toolbar.prototype.eleFocus = function (closest, pos) {\n        var sib = Object(closest)[pos + 'ElementSibling'];\n        if (sib) {\n            var skipEle = this.eleContains(sib);\n            if (skipEle) {\n                this.eleFocus(sib, pos);\n                return;\n            }\n            this.elementFocus(sib);\n        }\n        else if (this.tbarAlign) {\n            var elem = Object(closest.parentElement)[pos + 'ElementSibling'];\n            if (!isNOU(elem) && elem.children.length === 0) {\n                elem = Object(elem)[pos + 'ElementSibling'];\n            }\n            if (!isNOU(elem) && elem.children.length > 0) {\n                if (pos === 'next') {\n                    var el = elem.querySelector('.' + CLS_ITEM);\n                    if (this.eleContains(el)) {\n                        this.eleFocus(el, pos);\n                    }\n                    else {\n                        el.firstElementChild.focus();\n                        this.activeEleSwitch(el);\n                    }\n                }\n                else {\n                    var el = elem.lastElementChild;\n                    if (this.eleContains(el)) {\n                        this.eleFocus(el, pos);\n                    }\n                    else {\n                        this.elementFocus(el);\n                    }\n                }\n            }\n        }\n    };\n    Toolbar.prototype.clickHandler = function (e) {\n        var _this = this;\n        var trgt = e.target;\n        var clsList = trgt.classList;\n        var ele = this.element;\n        var isPopupElement = !isNOU(closest(trgt, '.' + CLS_POPUPCLASS));\n        var popupNav = closest(trgt, ('.' + CLS_TBARNAV));\n        if (!popupNav) {\n            popupNav = trgt;\n        }\n        if (!ele.children[0].classList.contains('e-hscroll') && !ele.children[0].classList.contains('e-vscroll')\n            && (clsList.contains(CLS_TBARNAV))) {\n            clsList = trgt.querySelector('.e-icons').classList;\n        }\n        if (clsList.contains(CLS_POPUPICON) || clsList.contains(CLS_POPUPDOWN)) {\n            this.popupClickHandler(ele, popupNav, CLS_RTL);\n        }\n        var itemObj;\n        var clst = closest(e.target, '.' + CLS_ITEM);\n        if ((isNOU(clst) || clst.classList.contains(CLS_DISABLE)) && !popupNav.classList.contains(CLS_TBARNAV)) {\n            return;\n        }\n        if (clst) {\n            var tempItem = this.items[this.tbarEle.indexOf(clst)];\n            if (tempItem && isBlazor() && this.isServerRendered) {\n                itemObj = {\n                    id: tempItem.id,\n                    text: tempItem.text,\n                    width: tempItem.width,\n                    cssClass: tempItem.cssClass,\n                    showAlwaysInPopup: tempItem.showAlwaysInPopup,\n                    disabled: tempItem.disabled,\n                    prefixIcon: tempItem.prefixIcon,\n                    suffixIcon: tempItem.suffixIcon,\n                    visible: tempItem.visible,\n                    overflow: tempItem.overflow,\n                    template: tempItem.template,\n                    type: tempItem.type,\n                    showTextOn: tempItem.showTextOn,\n                    htmlAttributes: tempItem.htmlAttributes,\n                    tooltipText: tempItem.tooltipText,\n                    align: tempItem.align,\n                    click: tempItem.click\n                };\n            }\n            else {\n                itemObj = tempItem;\n            }\n        }\n        var eventArgs = { originalEvent: e, item: itemObj };\n        if (itemObj && !isNOU(itemObj.click)) {\n            this.trigger('items[' + this.tbarEle.indexOf(clst) + '].click', eventArgs);\n        }\n        if (!eventArgs.cancel) {\n            this.trigger('clicked', eventArgs, function (clickedArgs) {\n                if (!isNOU(_this.popObj) && isPopupElement && !clickedArgs.cancel && _this.overflowMode === 'Popup' &&\n                    clickedArgs.item && clickedArgs.item.type !== 'Input') {\n                    _this.popObj.hide({ name: 'FadeOut', duration: 100 });\n                }\n            });\n        }\n    };\n    ;\n    Toolbar.prototype.popupClickHandler = function (ele, popupNav, CLS_RTL) {\n        var popObj = this.popObj;\n        if (isVisible(popObj.element)) {\n            popupNav.classList.remove(CLS_TBARNAVACT);\n            popObj.hide({ name: 'FadeOut', duration: 100 });\n        }\n        else {\n            if (ele.classList.contains(CLS_RTL)) {\n                popObj.enableRtl = true;\n                popObj.position = { X: 'left', Y: 'top' };\n            }\n            if (popObj.offsetX === 0 && !ele.classList.contains(CLS_RTL)) {\n                popObj.enableRtl = false;\n                popObj.position = { X: 'right', Y: 'top' };\n            }\n            popObj.dataBind();\n            popObj.refreshPosition();\n            popObj.element.style.top = this.getElementOffsetY() + 'px';\n            if (this.overflowMode === 'Extended') {\n                popObj.element.style.minHeight = '0px';\n            }\n            popupNav.classList.add(CLS_TBARNAVACT);\n            popObj.show({ name: 'FadeIn', duration: 100 });\n        }\n    };\n    /**\n     * To Initialize the control rendering\n     * @private\n     */\n    Toolbar.prototype.render = function () {\n        this.initialize();\n        this.renderControl();\n        this.wireEvents();\n        this.renderComplete();\n    };\n    Toolbar.prototype.initialize = function () {\n        var width = formatUnit(this.width);\n        var height = formatUnit(this.height);\n        if (Browser.info.name !== 'msie' || this.height !== 'auto' || this.overflowMode === 'MultiRow') {\n            setStyle(this.element, { 'height': height });\n        }\n        setStyle(this.element, { 'width': width });\n        var ariaAttr = {\n            'role': 'toolbar', 'aria-disabled': 'false', 'aria-haspopup': 'false',\n            'aria-orientation': !this.isVertical ? 'horizontal' : 'vertical',\n        };\n        attributes(this.element, ariaAttr);\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass.split(' '));\n        }\n    };\n    Toolbar.prototype.renderControl = function () {\n        var ele = this.element;\n        this.trgtEle = (ele.children.length > 0 && (!isBlazor() && !this.isServerRendered)) ? ele.querySelector('div') : null;\n        this.tbarAlgEle = { lefts: [], centers: [], rights: [] };\n        this.renderItems();\n        this.renderLayout();\n    };\n    Toolbar.prototype.renderLayout = function () {\n        this.renderOverflowMode();\n        if (this.tbarAlign) {\n            this.itemPositioning();\n        }\n        if (this.popObj && this.popObj.element.childElementCount > 1 && this.checkPopupRefresh(this.element, this.popObj.element)) {\n            this.popupRefresh(this.popObj.element, false);\n        }\n        this.separator();\n    };\n    Toolbar.prototype.itemsAlign = function (items, itemEleDom) {\n        var innerItem;\n        var innerPos;\n        if (!this.tbarEle) {\n            this.tbarEle = [];\n        }\n        for (var i = 0; i < items.length; i++) {\n            if (isBlazor() && this.isServerRendered) {\n                this.isVertical = this.element.classList.contains(CLS_VERTICAL) ? true : false;\n                var itemEleBlaDom = this.element.querySelector('.' + BZ_ITEMS);\n                innerItem = itemEleBlaDom.querySelector('.' + CLS_ITEM + '[data-index=\"' + i + '\"]');\n                if (!innerItem) {\n                    continue;\n                }\n                if (items[i].overflow !== 'Show' && items[i].showAlwaysInPopup && !innerItem.classList.contains(CLS_SEPARATOR)) {\n                    this.popupPriCount++;\n                }\n                if (items[i].htmlAttributes) {\n                    this.setAttr(items[i].htmlAttributes, innerItem);\n                }\n                if (items[i].type === 'Button') {\n                    EventHandler.clearEvents(innerItem);\n                    EventHandler.add(innerItem, 'click', this.itemClick, this);\n                }\n            }\n            else {\n                innerItem = this.renderSubComponent(items[i], i);\n            }\n            if (this.tbarEle.indexOf(innerItem) === -1) {\n                this.tbarEle.push(innerItem);\n            }\n            if (!this.tbarAlign) {\n                this.tbarItemAlign(items[i], itemEleDom, i);\n            }\n            innerPos = itemEleDom.querySelector('.e-toolbar-' + items[i].align.toLowerCase());\n            if (innerPos) {\n                if (!(items[i].showAlwaysInPopup && items[i].overflow !== 'Show')) {\n                    this.tbarAlgEle[(items[i].align + 's').toLowerCase()].push(innerItem);\n                }\n                innerPos.appendChild(innerItem);\n            }\n            else {\n                itemEleDom.appendChild(innerItem);\n            }\n            // tslint:disable-next-line:no-any\n            if (this.isReact) {\n                this.renderReactTemplates();\n            }\n        }\n    };\n    Toolbar.prototype.serverItemsRerender = function () {\n        this.destroyMode();\n        this.resetServerItems();\n        this.serverItemsRefresh();\n    };\n    Toolbar.prototype.serverItemsRefresh = function () {\n        var wrapBlaEleDom = this.element.querySelector('.' + BZ_ITEMS);\n        if (wrapBlaEleDom.children.length > 0) {\n            this.itemsAlign(this.items, this.element.querySelector('.' + CLS_ITEMS));\n            this.renderLayout();\n            this.refreshOverflow();\n        }\n    };\n    Toolbar.prototype.resetServerItems = function () {\n        var wrapBlaEleDom = this.element.querySelector('.' + BZ_ITEMS);\n        var itemEles = [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, this.element));\n        append(itemEles, wrapBlaEleDom);\n        this.clearProperty();\n    };\n    /** @hidden */\n    Toolbar.prototype.changeOrientation = function () {\n        var ele = this.element;\n        if (this.isVertical) {\n            ele.classList.remove(CLS_VERTICAL);\n            this.isVertical = false;\n            if (this.height === 'auto' || this.height === '100%') {\n                ele.style.height = this.height;\n            }\n            ele.setAttribute('aria-orientation', 'horizontal');\n        }\n        else {\n            ele.classList.add(CLS_VERTICAL);\n            this.isVertical = true;\n            ele.setAttribute('aria-orientation', 'vertical');\n            setStyle(this.element, { 'height': formatUnit(this.height), 'width': formatUnit(this.width) });\n        }\n        this.destroyMode();\n        this.refreshOverflow();\n    };\n    Toolbar.prototype.initScroll = function (element, innerItems) {\n        if (!this.scrollModule && this.checkOverflow(element, innerItems[0])) {\n            if (this.tbarAlign) {\n                this.element.querySelector('.' + CLS_ITEMS + ' .' + CLS_TBARCENTER).removeAttribute('style');\n            }\n            if (this.isVertical) {\n                this.scrollModule = new VScroll({ scrollStep: this.scrollStep, enableRtl: this.enableRtl }, innerItems[0]);\n            }\n            else {\n                this.scrollModule = new HScroll({ scrollStep: this.scrollStep, enableRtl: this.enableRtl }, innerItems[0]);\n            }\n            this.remove(this.scrollModule.element, CLS_TBARPOS);\n            setStyle(this.element, { overflow: 'hidden' });\n        }\n    };\n    Toolbar.prototype.itemWidthCal = function (items) {\n        var _this = this;\n        var width = 0;\n        var style;\n        [].slice.call(selectAll('.' + CLS_ITEM, items)).forEach(function (el) {\n            if (isVisible(el)) {\n                style = window.getComputedStyle(el);\n                width += _this.isVertical ? el.offsetHeight : el.offsetWidth;\n                width += parseFloat(_this.isVertical ? style.marginTop : style.marginRight);\n                width += parseFloat(_this.isVertical ? style.marginBottom : style.marginLeft);\n            }\n        });\n        return width;\n    };\n    Toolbar.prototype.getScrollCntEle = function (innerItem) {\n        var trgClass = (this.isVertical) ? '.e-vscroll-content' : '.e-hscroll-content';\n        return innerItem.querySelector(trgClass);\n    };\n    Toolbar.prototype.checkOverflow = function (element, innerItem) {\n        if (isNOU(element) || isNOU(innerItem) || !isVisible(element)) {\n            return false;\n        }\n        var eleWidth = this.isVertical ? element.offsetHeight : element.offsetWidth;\n        var itemWidth = this.isVertical ? innerItem.offsetHeight : innerItem.offsetWidth;\n        if (this.tbarAlign || this.scrollModule || (eleWidth === itemWidth)) {\n            itemWidth = this.itemWidthCal(this.scrollModule ? this.getScrollCntEle(innerItem) : innerItem);\n        }\n        var popNav = element.querySelector('.' + CLS_TBARNAV);\n        var scrollNav = element.querySelector('.' + CLS_TBARSCRLNAV);\n        var navEleWidth = 0;\n        if (popNav) {\n            navEleWidth = this.isVertical ? popNav.offsetHeight : popNav.offsetWidth;\n        }\n        else if (scrollNav) {\n            navEleWidth = this.isVertical ? (scrollNav.offsetHeight * (2)) : (scrollNav.offsetWidth * 2);\n        }\n        if (itemWidth > eleWidth - navEleWidth) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * Refresh the whole Toolbar component without re-rendering.\n     * - It is used to manually refresh the Toolbar overflow modes such as scrollable, popup, multi row, and extended.\n     * - It will refresh the Toolbar component after loading items dynamically.\n     * @returns void.\n     */\n    Toolbar.prototype.refreshOverflow = function () {\n        this.resize();\n    };\n    Toolbar.prototype.toolbarAlign = function (innerItems) {\n        if (this.tbarAlign) {\n            this.add(innerItems, CLS_TBARPOS);\n            this.itemPositioning();\n        }\n    };\n    Toolbar.prototype.renderOverflowMode = function () {\n        var ele = this.element;\n        var innerItems = ele.querySelector('.' + CLS_ITEMS);\n        var priorityCheck = this.popupPriCount > 0;\n        if (ele && ele.children.length > 0) {\n            this.offsetWid = ele.offsetWidth;\n            this.remove(this.element, 'e-toolpop');\n            if (Browser.info.name === 'msie' && this.height === 'auto') {\n                ele.style.height = '';\n            }\n            switch (this.overflowMode) {\n                case 'Scrollable':\n                    if (isNOU(this.scrollModule)) {\n                        this.initScroll(ele, [].slice.call(ele.getElementsByClassName(CLS_ITEMS)));\n                    }\n                    break;\n                case 'Popup':\n                    this.add(this.element, 'e-toolpop');\n                    if (this.tbarAlign) {\n                        this.removePositioning();\n                    }\n                    if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n                        this.setOverflowAttributes(ele);\n                    }\n                    this.toolbarAlign(innerItems);\n                    break;\n                case 'MultiRow':\n                    this.add(innerItems, CLS_MULTIROW);\n                    if (this.checkOverflow(ele, innerItems) && this.tbarAlign) {\n                        this.removePositioning();\n                        this.add(innerItems, CLS_MULTIROWPOS);\n                    }\n                    if (ele.style.overflow === 'hidden') {\n                        ele.style.overflow = '';\n                    }\n                    if (Browser.info.name === 'msie' || ele.style.height !== 'auto') {\n                        ele.style.height = 'auto';\n                    }\n                    break;\n                case 'Extended':\n                    this.add(this.element, CLS_EXTEANDABLE_TOOLBAR);\n                    if (this.checkOverflow(ele, innerItems) || priorityCheck) {\n                        if (this.tbarAlign) {\n                            this.removePositioning();\n                        }\n                        this.setOverflowAttributes(ele);\n                    }\n                    this.toolbarAlign(innerItems);\n            }\n        }\n    };\n    Toolbar.prototype.setOverflowAttributes = function (ele) {\n        this.createPopupEle(ele, [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, ele)));\n        this.element.querySelector('.' + CLS_TBARNAV).setAttribute('tabIndex', '0');\n        this.element.querySelector('.' + CLS_TBARNAV).setAttribute('role', 'list');\n    };\n    Toolbar.prototype.separator = function () {\n        var element = this.element;\n        var eleItem = [].slice.call(element.querySelectorAll('.' + CLS_SEPARATOR));\n        var eleInlineItem;\n        var multiVar = element.querySelector('.' + CLS_MULTIROW_SEPARATOR);\n        var extendVar = element.querySelector('.' + CLS_EXTENDABLE_SEPARATOR);\n        eleInlineItem = this.overflowMode === 'MultiRow' ? multiVar : extendVar;\n        if (eleInlineItem !== null) {\n            if (this.overflowMode === 'MultiRow') {\n                eleInlineItem.classList.remove(CLS_MULTIROW_SEPARATOR);\n            }\n            else if (this.overflowMode === 'Extended') {\n                eleInlineItem.classList.remove(CLS_EXTENDABLE_SEPARATOR);\n            }\n        }\n        for (var i = 0; i <= eleItem.length - 1; i++) {\n            if (eleItem[i].offsetLeft < 30 && eleItem[i].offsetLeft !== 0) {\n                if (this.overflowMode === 'MultiRow') {\n                    eleItem[i].classList.add(CLS_MULTIROW_SEPARATOR);\n                }\n                else if (this.overflowMode === 'Extended') {\n                    eleItem[i].classList.add(CLS_EXTENDABLE_SEPARATOR);\n                }\n            }\n        }\n    };\n    Toolbar.prototype.createPopupEle = function (ele, innerEle) {\n        var innerNav = ele.querySelector('.' + CLS_TBARNAV);\n        var vertical = this.isVertical;\n        if (!innerNav) {\n            this.createPopupIcon(ele);\n        }\n        innerNav = ele.querySelector('.' + CLS_TBARNAV);\n        var innerNavDom = (vertical ? innerNav.offsetHeight : innerNav.offsetWidth);\n        var eleWidth = ((vertical ? ele.offsetHeight : ele.offsetWidth) - (innerNavDom));\n        this.element.classList.remove('e-rtl');\n        setStyle(this.element, { direction: 'initial' });\n        this.checkPriority(ele, innerEle, eleWidth, true);\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        this.element.style.removeProperty('direction');\n        this.createPopup();\n    };\n    Toolbar.prototype.pushingPoppedEle = function (tbarObj, popupPri, ele, eleHeight, sepHeight) {\n        var element = tbarObj.element;\n        var nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n        var nodeIndex = 0;\n        var poppedEle = [].slice.call(selectAll('.' + CLS_POPUP, element.querySelector('.' + CLS_ITEMS)));\n        var nodePri = 0;\n        poppedEle.forEach(function (el, index) {\n            nodes = selectAll('.' + CLS_TBAROVERFLOW, ele);\n            if (el.classList.contains(CLS_TBAROVERFLOW) && nodes.length > 0) {\n                if (tbarObj.tbResize && nodes.length > index) {\n                    ele.insertBefore(el, nodes[index]);\n                    ++nodePri;\n                }\n                else {\n                    ele.insertBefore(el, ele.children[nodes.length]);\n                    ++nodePri;\n                }\n            }\n            else if (el.classList.contains(CLS_TBAROVERFLOW)) {\n                ele.insertBefore(el, ele.firstChild);\n                ++nodePri;\n            }\n            else if (tbarObj.tbResize && el.classList.contains(CLS_POPOVERFLOW) && ele.children.length > 0 && nodes.length === 0) {\n                ele.insertBefore(el, ele.firstChild);\n                ++nodePri;\n            }\n            else if (el.classList.contains(CLS_POPOVERFLOW)) {\n                popupPri.push(el);\n            }\n            else if (tbarObj.tbResize) {\n                ele.insertBefore(el, ele.childNodes[nodeIndex + nodePri]);\n                ++nodeIndex;\n            }\n            else {\n                ele.appendChild(el);\n            }\n            if (el.classList.contains(CLS_SEPARATOR)) {\n                setStyle(el, { display: '', height: sepHeight + 'px' });\n            }\n            else {\n                setStyle(el, { display: '', height: eleHeight + 'px' });\n            }\n        });\n        popupPri.forEach(function (el) {\n            ele.appendChild(el);\n        });\n        var tbarEle = selectAll('.' + CLS_ITEM, element.querySelector('.' + CLS_ITEMS));\n        for (var i = tbarEle.length - 1; i >= 0; i--) {\n            var tbarElement = tbarEle[i];\n            if (tbarElement.classList.contains(CLS_SEPARATOR) && this.overflowMode !== 'Extended') {\n                setStyle(tbarElement, { display: 'none' });\n            }\n            else {\n                break;\n            }\n        }\n    };\n    Toolbar.prototype.createPopup = function () {\n        var element = this.element;\n        var eleHeight;\n        var eleItem;\n        var sepHeight;\n        var sepItem;\n        if (this.overflowMode === 'Extended') {\n            sepItem = element.querySelector('.' + CLS_SEPARATOR + ':not(.' + CLS_POPUP + ')');\n            sepHeight = (element.style.height === 'auto' || element.style.height === '') ? null : sepItem.offsetHeight;\n        }\n        eleItem = element.querySelector('.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_POPUP + ')');\n        eleHeight = (element.style.height === 'auto' || element.style.height === '') ? null : (eleItem && eleItem.offsetHeight);\n        var ele;\n        var popupPri = [];\n        if (element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS)) {\n            ele = element.querySelector('#' + element.id + '_popup.' + CLS_POPUPCLASS);\n        }\n        else {\n            var extendEle = this.createElement('div', {\n                id: element.id + '_popup', className: CLS_POPUPCLASS + ' ' + CLS_EXTENDABLECLASS\n            });\n            var popupEle = this.createElement('div', { id: element.id + '_popup', className: CLS_POPUPCLASS });\n            ele = this.overflowMode === 'Extended' ? extendEle : popupEle;\n        }\n        this.pushingPoppedEle(this, popupPri, ele, eleHeight, sepHeight);\n        this.popupInit(element, ele);\n    };\n    Toolbar.prototype.getElementOffsetY = function () {\n        return (this.overflowMode === 'Extended' && window.getComputedStyle(this.element).getPropertyValue('box-sizing') === 'border-box' ?\n            this.element.clientHeight : this.element.offsetHeight);\n    };\n    Toolbar.prototype.popupInit = function (element, ele) {\n        if (!this.popObj) {\n            element.appendChild(ele);\n            setStyle(this.element, { overflow: '' });\n            var eleStyles = window.getComputedStyle(this.element);\n            var popup = new Popup(null, {\n                relateTo: this.element,\n                offsetY: (this.isVertical) ? 0 : this.getElementOffsetY(),\n                enableRtl: this.enableRtl,\n                open: this.popupOpen.bind(this),\n                close: this.popupClose.bind(this),\n                collision: { Y: this.enableCollision ? 'flip' : 'none' },\n                position: this.enableRtl ? { X: 'left', Y: 'top' } : { X: 'right', Y: 'top' }\n            });\n            popup.appendTo(ele);\n            if (this.overflowMode === 'Extended') {\n                popup.width = parseFloat(eleStyles.width) + ((parseFloat(eleStyles.borderRightWidth)) * 2);\n                popup.offsetX = 0;\n            }\n            EventHandler.add(document, 'scroll', this.docEvent.bind(this));\n            EventHandler.add(document, 'click ', this.docEvent.bind(this));\n            popup.element.style.maxHeight = popup.element.offsetHeight + 'px';\n            if (this.isVertical) {\n                popup.element.style.visibility = 'hidden';\n            }\n            if (this.isExtendedOpen) {\n                var popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n                popupNav.classList.add(CLS_TBARNAVACT);\n                classList(popupNav.firstElementChild, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n                this.element.querySelector('.' + CLS_EXTENDABLECLASS).classList.add(CLS_POPUPOPEN);\n            }\n            else {\n                popup.hide();\n            }\n            this.popObj = popup;\n            this.element.setAttribute('aria-haspopup', 'true');\n        }\n        else {\n            var popupEle = this.popObj.element;\n            setStyle(popupEle, { maxHeight: '', display: 'block' });\n            setStyle(popupEle, { maxHeight: popupEle.offsetHeight + 'px', display: '' });\n        }\n    };\n    Toolbar.prototype.tbarPopupHandler = function (isOpen) {\n        if (this.overflowMode === 'Extended') {\n            isOpen ? this.add(this.element, CLS_EXTENDEDPOPOPEN) : this.remove(this.element, CLS_EXTENDEDPOPOPEN);\n        }\n    };\n    Toolbar.prototype.popupOpen = function (e) {\n        var popObj = this.popObj;\n        if (!this.isVertical) {\n            popObj.offsetY = this.getElementOffsetY();\n            popObj.dataBind();\n        }\n        var popupEle = this.popObj.element;\n        var toolEle = this.popObj.element.parentElement;\n        var popupNav = toolEle.querySelector('.' + CLS_TBARNAV);\n        setStyle(popObj.element, { height: 'auto', maxHeight: '' });\n        popObj.element.style.maxHeight = popObj.element.offsetHeight + 'px';\n        if (this.overflowMode === 'Extended') {\n            popObj.element.style.minHeight = '';\n        }\n        var popupElePos = popupEle.offsetTop + popupEle.offsetHeight + calculatePosition(toolEle).top;\n        var popIcon = popupNav.firstElementChild;\n        popupNav.classList.add(CLS_TBARNAVACT);\n        classList(popIcon, [CLS_POPUPICON], [CLS_POPUPDOWN]);\n        this.tbarPopupHandler(true);\n        var scrollVal = isNOU(window.scrollY) ? 0 : window.scrollY;\n        if (!this.isVertical && ((window.innerHeight + scrollVal) < popupElePos) && (this.element.offsetTop < popupEle.offsetHeight)) {\n            var overflowHeight = (popupEle.offsetHeight - ((popupElePos - window.innerHeight - scrollVal) + 5));\n            popObj.height = overflowHeight + 'px';\n            for (var i = 0; i <= popupEle.childElementCount; i++) {\n                var ele = popupEle.children[i];\n                if (ele.offsetTop + ele.offsetHeight > overflowHeight) {\n                    overflowHeight = ele.offsetTop;\n                    break;\n                }\n            }\n            setStyle(popObj.element, { maxHeight: overflowHeight + 'px' });\n        }\n        else if (this.isVertical) {\n            var tbEleData = this.element.getBoundingClientRect();\n            setStyle(popObj.element, { maxHeight: (tbEleData.top + this.element.offsetHeight) + 'px', bottom: 0, visibility: '' });\n        }\n        if (popObj) {\n            popObj.refreshPosition();\n        }\n    };\n    Toolbar.prototype.popupClose = function (e) {\n        var element = this.element;\n        var popupNav = element.querySelector('.' + CLS_TBARNAV);\n        var popIcon = popupNav.firstElementChild;\n        popupNav.classList.remove(CLS_TBARNAVACT);\n        classList(popIcon, [CLS_POPUPDOWN], [CLS_POPUPICON]);\n        this.tbarPopupHandler(false);\n    };\n    Toolbar.prototype.checkPriority = function (ele, inEle, eleWidth, pre) {\n        var popPriority = this.popupPriCount > 0;\n        var len = inEle.length;\n        var eleWid = eleWidth;\n        var eleOffset;\n        var checkoffset;\n        var sepCheck = 0;\n        var itemCount = 0;\n        var itemPopCount = 0;\n        var checkClass = function (ele, val) {\n            var rVal = false;\n            val.forEach(function (cls) {\n                if (ele.classList.contains(cls)) {\n                    rVal = true;\n                }\n            });\n            return rVal;\n        };\n        for (var i = len - 1; i >= 0; i--) {\n            var mrgn = void 0;\n            var compuStyle = window.getComputedStyle(inEle[i]);\n            if (this.isVertical) {\n                mrgn = parseFloat((compuStyle).marginTop);\n                mrgn += parseFloat((compuStyle).marginBottom);\n            }\n            else {\n                mrgn = parseFloat((compuStyle).marginRight);\n                mrgn += parseFloat((compuStyle).marginLeft);\n            }\n            var fstEleCheck = inEle[i] === this.tbarEle[0];\n            if (fstEleCheck) {\n                this.tbarEleMrgn = mrgn;\n            }\n            eleOffset = this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth;\n            var eleWid_1 = fstEleCheck ? (eleOffset + mrgn) : eleOffset;\n            if (checkClass(inEle[i], [CLS_POPPRI]) && popPriority) {\n                inEle[i].classList.add(CLS_POPUP);\n                if (this.isVertical) {\n                    setStyle(inEle[i], { display: 'none', minHeight: eleWid_1 + 'px' });\n                }\n                else {\n                    setStyle(inEle[i], { display: 'none', minWidth: eleWid_1 + 'px' });\n                }\n                itemPopCount++;\n            }\n            if (this.isVertical) {\n                checkoffset = (inEle[i].offsetTop + inEle[i].offsetHeight + mrgn) > eleWidth;\n            }\n            else {\n                checkoffset = (inEle[i].offsetLeft + inEle[i].offsetWidth + mrgn) > eleWidth;\n            }\n            if (checkoffset) {\n                if (inEle[i].classList.contains(CLS_SEPARATOR)) {\n                    if (this.overflowMode === 'Extended') {\n                        if (itemCount === itemPopCount) {\n                            var sepEle = inEle[i];\n                            if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                                inEle[i].classList.add(CLS_POPUP);\n                                itemPopCount++;\n                            }\n                        }\n                        itemCount++;\n                    }\n                    else if (this.overflowMode === 'Popup') {\n                        if (sepCheck > 0 && itemCount === itemPopCount) {\n                            var sepEle = inEle[i + itemCount + (sepCheck - 1)];\n                            if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                                setStyle(sepEle, { display: 'none' });\n                            }\n                        }\n                        sepCheck++;\n                        itemCount = 0;\n                        itemPopCount = 0;\n                    }\n                }\n                else {\n                    itemCount++;\n                }\n                if (inEle[i].classList.contains(CLS_TBAROVERFLOW) && pre) {\n                    eleWidth -= ((this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + (mrgn));\n                }\n                else if (!checkClass(inEle[i], [CLS_SEPARATOR, CLS_TBARIGNORE])) {\n                    inEle[i].classList.add(CLS_POPUP);\n                    if (this.isVertical) {\n                        setStyle(inEle[i], { display: 'none', minHeight: eleWid_1 + 'px' });\n                    }\n                    else {\n                        setStyle(inEle[i], { display: 'none', minWidth: eleWid_1 + 'px' });\n                    }\n                    itemPopCount++;\n                }\n                else {\n                    eleWidth -= ((this.isVertical ? inEle[i].offsetHeight : inEle[i].offsetWidth) + (mrgn));\n                }\n            }\n        }\n        if (pre) {\n            var popedEle = selectAll('.' + CLS_ITEM + ':not(.' + CLS_POPUP + ')', this.element);\n            this.checkPriority(ele, popedEle, eleWid, false);\n        }\n    };\n    Toolbar.prototype.createPopupIcon = function (element) {\n        var id = element.id.concat('_nav');\n        var className = 'e-' + element.id.concat('_nav ' + CLS_POPUPNAV);\n        className = this.overflowMode === 'Extended' ? className + ' ' + CLS_EXTENDPOPUP : className;\n        var nav = this.createElement('div', { id: id, className: className });\n        if (Browser.info.name === 'msie' || Browser.info.name === 'edge') {\n            nav.classList.add('e-ie-align');\n        }\n        var navItem = this.createElement('div', { className: CLS_POPUPDOWN + ' e-icons' });\n        nav.appendChild(navItem);\n        nav.setAttribute('tabindex', '0');\n        nav.setAttribute('role', 'list');\n        element.appendChild(nav);\n    };\n    Toolbar.prototype.tbarPriRef = function (inEle, indx, sepPri, el, des, elWid, wid, ig) {\n        var ignoreCount = ig;\n        var popEle = this.popObj.element;\n        var query = '.' + CLS_ITEM + ':not(.' + CLS_SEPARATOR + '):not(.' + CLS_TBAROVERFLOW + ')';\n        var priEleCnt = selectAll('.' + CLS_POPUP + ':not(.' + CLS_TBAROVERFLOW + ')', popEle).length;\n        var checkClass = function (ele, val) {\n            return ele.classList.contains(val);\n        };\n        if (selectAll(query, inEle).length === 0) {\n            var eleSep = inEle.children[indx - (indx - sepPri) - 1];\n            var ignoreCheck = (!isNOU(eleSep) && checkClass(eleSep, CLS_TBARIGNORE));\n            if ((!isNOU(eleSep) && checkClass(eleSep, CLS_SEPARATOR) && !isVisible(eleSep)) || ignoreCheck) {\n                var sepDisplay = 'none';\n                eleSep.style.display = 'inherit';\n                var eleSepWidth = eleSep.offsetWidth + (parseFloat(window.getComputedStyle(eleSep).marginRight) * 2);\n                var prevSep = eleSep.previousElementSibling;\n                if ((elWid + eleSepWidth) < wid || des) {\n                    inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n                    if (!isNOU(prevSep)) {\n                        prevSep.style.display = '';\n                    }\n                }\n                else {\n                    if (prevSep.classList.contains(CLS_SEPARATOR)) {\n                        prevSep.style.display = sepDisplay;\n                    }\n                }\n                eleSep.style.display = '';\n            }\n            else {\n                inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - (indx - sepPri)]);\n            }\n        }\n        else {\n            inEle.insertBefore(el, inEle.children[(indx + ignoreCount) - priEleCnt]);\n        }\n    };\n    Toolbar.prototype.popupRefresh = function (popupEle, destroy) {\n        var _this = this;\n        var ele = this.element;\n        var isVer = this.isVertical;\n        var popNav = ele.querySelector('.' + CLS_TBARNAV);\n        var innerEle = ele.querySelector('.' + CLS_ITEMS);\n        if (isNOU(popNav)) {\n            return;\n        }\n        innerEle.removeAttribute('style');\n        popupEle.style.display = 'block';\n        var dimension;\n        if (isVer) {\n            dimension = ele.offsetHeight - (popNav.offsetHeight + innerEle.offsetHeight);\n        }\n        else {\n            dimension = ele.offsetWidth - (popNav.offsetWidth + innerEle.offsetWidth);\n        }\n        var popupEleWidth = 0;\n        [].slice.call(popupEle.children).forEach(function (el) {\n            popupEleWidth += _this.popupEleWidth(el);\n            setStyle(el, { 'position': '' });\n        });\n        if ((dimension + (isVer ? popNav.offsetHeight : popNav.offsetWidth)) > (popupEleWidth) && this.popupPriCount === 0) {\n            destroy = true;\n        }\n        this.popupEleRefresh(dimension, popupEle, destroy);\n        popupEle.style.display = '';\n        if (popupEle.children.length === 0 && popNav && this.popObj) {\n            detach(popNav);\n            popNav = null;\n            this.popObj.destroy();\n            detach(this.popObj.element);\n            this.popObj = null;\n            ele.setAttribute('aria-haspopup', 'false');\n        }\n    };\n    Toolbar.prototype.ignoreEleFetch = function (index, innerEle) {\n        var ignoreEle = [].slice.call(innerEle.querySelectorAll('.' + CLS_TBARIGNORE));\n        var ignoreInx = [];\n        var count = 0;\n        if (ignoreEle.length > 0) {\n            ignoreEle.forEach(function (ele) {\n                ignoreInx.push([].slice.call(innerEle.children).indexOf(ele));\n            });\n        }\n        else {\n            return 0;\n        }\n        ignoreInx.forEach(function (val) {\n            if (val <= index) {\n                count++;\n            }\n        });\n        return count;\n    };\n    Toolbar.prototype.checkPopupRefresh = function (root, popEle) {\n        popEle.style.display = 'block';\n        var elWid = this.popupEleWidth(popEle.firstElementChild);\n        popEle.firstElementChild.style.removeProperty('Position');\n        var tbarWidth = root.offsetWidth - root.querySelector('.' + CLS_TBARNAV).offsetWidth;\n        var tbarItemsWid = root.querySelector('.' + CLS_ITEMS).offsetWidth;\n        popEle.style.removeProperty('display');\n        if (tbarWidth > (elWid + tbarItemsWid)) {\n            return true;\n        }\n        return false;\n    };\n    Toolbar.prototype.popupEleWidth = function (el) {\n        el.style.position = 'absolute';\n        var elWidth = this.isVertical ? el.offsetHeight : el.offsetWidth;\n        var btnText = el.querySelector('.' + CLS_TBARBTNTEXT);\n        if (el.classList.contains('e-tbtn-align') || el.classList.contains(CLS_TBARTEXT)) {\n            var btn = el.children[0];\n            if (!isNOU(btnText) && el.classList.contains(CLS_TBARTEXT)) {\n                btnText.style.display = 'none';\n            }\n            else if (!isNOU(btnText) && el.classList.contains(CLS_POPUPTEXT)) {\n                btnText.style.display = 'block';\n            }\n            btn.style.minWidth = '0%';\n            elWidth = parseFloat(!this.isVertical ? el.style.minWidth : el.style.minHeight);\n            btn.style.minWidth = '';\n            btn.style.minHeight = '';\n            if (!isNOU(btnText)) {\n                btnText.style.display = '';\n            }\n        }\n        return elWidth;\n    };\n    Toolbar.prototype.popupEleRefresh = function (width, popupEle, destroy) {\n        var popPriority = this.popupPriCount > 0;\n        var eleSplice = this.tbarEle;\n        var priEleCnt;\n        var index;\n        var checkOverflow;\n        var innerEle = this.element.querySelector('.' + CLS_ITEMS);\n        var ignoreCount = 0;\n        var _loop_1 = function (el) {\n            if (el.classList.contains(CLS_POPPRI) && popPriority && !destroy) {\n                return \"continue\";\n            }\n            var elWidth = this_1.popupEleWidth(el);\n            if (el === this_1.tbarEle[0]) {\n                elWidth += this_1.tbarEleMrgn;\n            }\n            el.style.position = '';\n            if (elWidth < width || destroy) {\n                setStyle(el, { minWidth: '', height: '', minHeight: '' });\n                if (!el.classList.contains(CLS_POPOVERFLOW)) {\n                    el.classList.remove(CLS_POPUP);\n                }\n                index = this_1.tbarEle.indexOf(el);\n                if (this_1.tbarAlign) {\n                    var pos = this_1.items[index].align;\n                    index = this_1.tbarAlgEle[(pos + 's').toLowerCase()].indexOf(el);\n                    eleSplice = this_1.tbarAlgEle[(pos + 's').toLowerCase()];\n                    innerEle = this_1.element.querySelector('.' + CLS_ITEMS + ' .' + 'e-toolbar-' + pos.toLowerCase());\n                }\n                var sepBeforePri_1 = 0;\n                if (this_1.overflowMode !== 'Extended') {\n                    eleSplice.slice(0, index).forEach(function (el) {\n                        if (el.classList.contains(CLS_TBAROVERFLOW) || el.classList.contains(CLS_SEPARATOR)) {\n                            if (el.classList.contains(CLS_SEPARATOR)) {\n                                el.style.display = '';\n                                width -= el.offsetWidth;\n                            }\n                            sepBeforePri_1++;\n                        }\n                    });\n                }\n                ignoreCount = this_1.ignoreEleFetch(index, innerEle);\n                if (el.classList.contains(CLS_TBAROVERFLOW)) {\n                    this_1.tbarPriRef(innerEle, index, sepBeforePri_1, el, destroy, elWidth, width, ignoreCount);\n                    width -= el.offsetWidth;\n                }\n                else if (index === 0) {\n                    innerEle.insertBefore(el, innerEle.firstChild);\n                    width -= el.offsetWidth;\n                }\n                else {\n                    priEleCnt = selectAll('.' + CLS_TBAROVERFLOW, this_1.popObj.element).length;\n                    innerEle.insertBefore(el, innerEle.children[(index + ignoreCount) - priEleCnt]);\n                    width -= el.offsetWidth;\n                }\n                el.style.height = '';\n            }\n            else {\n                return \"break\";\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = [].slice.call(popupEle.children); _i < _a.length; _i++) {\n            var el = _a[_i];\n            var state_1 = _loop_1(el);\n            if (state_1 === \"break\")\n                break;\n        }\n        checkOverflow = this.checkOverflow(this.element, this.element.getElementsByClassName(CLS_ITEMS)[0]);\n        if (checkOverflow && !destroy) {\n            this.renderOverflowMode();\n        }\n    };\n    Toolbar.prototype.removePositioning = function () {\n        var item = this.element.querySelector('.' + CLS_ITEMS);\n        if (isNOU(item) || !item.classList.contains(CLS_TBARPOS)) {\n            return;\n        }\n        this.remove(item, CLS_TBARPOS);\n        var innerItem = [].slice.call(item.childNodes);\n        innerItem[1].removeAttribute('style');\n        innerItem[2].removeAttribute('style');\n    };\n    Toolbar.prototype.refreshPositioning = function () {\n        var item = this.element.querySelector('.' + CLS_ITEMS);\n        this.add(item, CLS_TBARPOS);\n        this.itemPositioning();\n    };\n    Toolbar.prototype.itemPositioning = function () {\n        var item = this.element.querySelector('.' + CLS_ITEMS);\n        var margin;\n        if (isNOU(item) || !item.classList.contains(CLS_TBARPOS)) {\n            return;\n        }\n        var popupNav = this.element.querySelector('.' + CLS_TBARNAV);\n        var innerItem;\n        if (this.scrollModule) {\n            var trgClass = (this.isVertical) ? CLS_VSCROLLCNT : CLS_HSCROLLCNT;\n            innerItem = [].slice.call(item.querySelector('.' + trgClass).children);\n        }\n        else {\n            innerItem = [].slice.call(item.childNodes);\n        }\n        if (this.isVertical) {\n            margin = innerItem[0].offsetHeight + innerItem[2].offsetHeight;\n        }\n        else {\n            margin = innerItem[0].offsetWidth + innerItem[2].offsetWidth;\n        }\n        var tbarWid = this.isVertical ? this.element.offsetHeight : this.element.offsetWidth;\n        if (popupNav) {\n            tbarWid -= (this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth);\n            var popWid = (this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth) + 'px';\n            innerItem[2].removeAttribute('style');\n            if (this.isVertical) {\n                this.enableRtl ? innerItem[2].style.top = popWid : innerItem[2].style.bottom = popWid;\n            }\n            else {\n                this.enableRtl ? innerItem[2].style.left = popWid : innerItem[2].style.right = popWid;\n            }\n        }\n        if (tbarWid <= margin) {\n            return;\n        }\n        var value = (((tbarWid - margin)) - (!this.isVertical ? innerItem[1].offsetWidth : innerItem[1].offsetHeight)) / 2;\n        innerItem[1].removeAttribute('style');\n        var mrgn = ((!this.isVertical ? innerItem[0].offsetWidth : innerItem[0].offsetHeight) + value) + 'px';\n        if (this.isVertical) {\n            this.enableRtl ? innerItem[1].style.marginBottom = mrgn : innerItem[1].style.marginTop = mrgn;\n        }\n        else {\n            this.enableRtl ? innerItem[1].style.marginRight = mrgn : innerItem[1].style.marginLeft = mrgn;\n        }\n    };\n    Toolbar.prototype.tbarItemAlign = function (item, itemEle, pos) {\n        var _this = this;\n        if (item.showAlwaysInPopup && item.overflow !== 'Show') {\n            return;\n        }\n        var alignDiv = [];\n        alignDiv.push(this.createElement('div', { className: CLS_TBARLEFT }));\n        alignDiv.push(this.createElement('div', { className: CLS_TBARCENTER }));\n        alignDiv.push(this.createElement('div', { className: CLS_TBARRIGHT }));\n        if (pos === 0 && item.align !== 'Left') {\n            alignDiv.forEach(function (ele) {\n                itemEle.appendChild(ele);\n            });\n            this.tbarAlign = true;\n            this.add(itemEle, CLS_TBARPOS);\n        }\n        else if (item.align !== 'Left') {\n            var alignEle = itemEle.childNodes;\n            var leftAlign_1 = alignDiv[0];\n            [].slice.call(alignEle).forEach(function (el) {\n                _this.tbarAlgEle.lefts.push(el);\n                leftAlign_1.appendChild(el);\n            });\n            itemEle.appendChild(leftAlign_1);\n            itemEle.appendChild(alignDiv[1]);\n            itemEle.appendChild(alignDiv[2]);\n            this.tbarAlign = true;\n            this.add(itemEle, CLS_TBARPOS);\n        }\n    };\n    Toolbar.prototype.ctrlTemplate = function () {\n        var _this = this;\n        this.ctrlTem = this.trgtEle.cloneNode(true);\n        this.add(this.trgtEle, CLS_ITEMS);\n        this.tbarEle = [];\n        var innerEle = [].slice.call(this.trgtEle.children);\n        innerEle.forEach(function (ele) {\n            if (ele.tagName === 'DIV') {\n                _this.tbarEle.push(ele);\n                ele.setAttribute('aria-disabled', 'false');\n                _this.add(ele, CLS_ITEM);\n            }\n        });\n    };\n    Toolbar.prototype.renderItems = function () {\n        var ele = this.element;\n        var items = this.items;\n        if (this.trgtEle != null) {\n            this.ctrlTemplate();\n        }\n        else if (ele && items.length > 0) {\n            var itemEleDom = void 0;\n            if (ele && ele.children.length > 0) {\n                itemEleDom = ele.querySelector('.' + CLS_ITEMS);\n            }\n            if (!itemEleDom) {\n                itemEleDom = this.createElement('div', { className: CLS_ITEMS });\n            }\n            this.itemsAlign(items, itemEleDom);\n            ele.appendChild(itemEleDom);\n        }\n    };\n    Toolbar.prototype.setAttr = function (attr, element) {\n        var key = Object.keys(attr);\n        var keyVal;\n        for (var i = 0; i < key.length; i++) {\n            keyVal = key[i];\n            keyVal === 'class' ? this.add(element, attr[keyVal]) : element.setAttribute(keyVal, attr[keyVal]);\n        }\n    };\n    /**\n     * Enables or disables the specified Toolbar item.\n     * @param  {number|HTMLElement|NodeList} items - DOM element or an array of items to be enabled or disabled.\n     * @param  {boolean} isEnable  - Boolean value that determines whether the command should be enabled or disabled.\n     * By default, `isEnable` is set to true.\n     * @returns void.\n     */\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        var elements = items;\n        var len = elements.length;\n        var ele;\n        if (isNOU(isEnable)) {\n            isEnable = true;\n        }\n        var enable = function (isEnable, ele) {\n            if (isEnable) {\n                ele.classList.remove(CLS_DISABLE);\n                ele.setAttribute('aria-disabled', 'false');\n            }\n            else {\n                ele.classList.add(CLS_DISABLE);\n                ele.setAttribute('aria-disabled', 'true');\n            }\n        };\n        if (!isNOU(len) && len >= 1) {\n            for (var a = 0, element = [].slice.call(elements); a < len; a++) {\n                var itemElement = element[a];\n                if (typeof (itemElement) === 'number') {\n                    ele = this.getElementByIndex(itemElement);\n                    if (isNOU(ele)) {\n                        return;\n                    }\n                    else {\n                        elements[a] = ele;\n                    }\n                }\n                else {\n                    ele = itemElement;\n                }\n                enable(isEnable, ele);\n            }\n            isEnable ? removeClass(elements, CLS_DISABLE) : addClass(elements, CLS_DISABLE);\n        }\n        else {\n            if (typeof (elements) === 'number') {\n                ele = this.getElementByIndex(elements);\n                if (isNOU(ele)) {\n                    return;\n                }\n            }\n            else {\n                ele = items;\n            }\n            enable(isEnable, ele);\n        }\n    };\n    Toolbar.prototype.getElementByIndex = function (index) {\n        if (this.tbarEle[index]) {\n            return this.tbarEle[index];\n        }\n        return null;\n    };\n    /**\n     * Adds new items to the Toolbar that accepts an array as Toolbar items.\n     * @param  {ItemsModel[]} items - DOM element or an array of items to be added to the Toolbar.\n     * @param  {number} index - Number value that determines where the command is to be added. By default, index is 0.\n     * @returns void.\n\n     */\n    Toolbar.prototype.addItems = function (items, index) {\n        var innerItems;\n        this.extendedOpen();\n        var itemsDiv = this.element.querySelector('.' + CLS_ITEMS);\n        if (isNOU(itemsDiv)) {\n            this.itemsRerender(items);\n            return;\n        }\n        var innerEle;\n        var itemAgn = 'Left';\n        if (isNOU(index)) {\n            index = 0;\n        }\n        items.forEach(function (e) {\n            if (!isNOU(e.align) && e.align !== 'Left' && itemAgn === 'Left') {\n                itemAgn = e.align;\n            }\n        });\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            if (isNOU(item.type)) {\n                item.type = 'Button';\n            }\n            innerItems = selectAll('.' + CLS_ITEM, this.element);\n            item.align = itemAgn;\n            innerEle = this.renderSubComponent(item, index);\n            if (this.tbarEle.length >= index && innerItems.length >= 0) {\n                if (isNOU(this.scrollModule)) {\n                    this.destroyMode();\n                }\n                var algIndex = item.align[0] === 'L' ? 0 : item.align[0] === 'C' ? 1 : 2;\n                var ele = void 0;\n                if (!this.tbarAlign && itemAgn !== 'Left') {\n                    this.tbarItemAlign(item, itemsDiv, 1);\n                    this.tbarAlign = true;\n                    ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n                    ele.appendChild(innerEle);\n                    this.tbarAlgEle[(item.align + 's').toLowerCase()].push(innerEle);\n                    this.refreshPositioning();\n                }\n                else if (this.tbarAlign) {\n                    ele = closest(innerItems[0], '.' + CLS_ITEMS).children[algIndex];\n                    ele.insertBefore(innerEle, ele.children[index]);\n                    this.tbarAlgEle[(item.align + 's').toLowerCase()].splice(index, 0, innerEle);\n                    this.refreshPositioning();\n                }\n                else if (innerItems.length === 0) {\n                    innerItems = selectAll('.' + CLS_ITEMS, this.element);\n                    innerItems[0].appendChild(innerEle);\n                }\n                else {\n                    innerItems[0].parentNode.insertBefore(innerEle, innerItems[index]);\n                }\n                this.items.splice(index, 0, item);\n                this.tbarEle.splice(index, 0, innerEle);\n                index++;\n                this.offsetWid = itemsDiv.offsetWidth;\n            }\n        }\n        itemsDiv.style.width = '';\n        this.renderOverflowMode();\n        // tslint:disable-next-line:no-any\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    /**\n     * Removes the items from the Toolbar. Acceptable arguments are index of item/HTMLElement/node list.\n     * @param  {number|HTMLElement|NodeList|HTMLElement[]} args\n     * Index or DOM element or an Array of item which is to be removed from the Toolbar.\n     * @returns void.\n\n     */\n    Toolbar.prototype.removeItems = function (args) {\n        var elements = args;\n        var index;\n        var innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n        if (typeof (elements) === 'number') {\n            index = parseInt(args.toString(), 10);\n            this.removeItemByIndex(index, innerItems);\n        }\n        else {\n            if (elements && elements.length > 1) {\n                for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {\n                    var ele = _a[_i];\n                    index = this.tbarEle.indexOf(ele);\n                    this.removeItemByIndex(index, innerItems);\n                    innerItems = selectAll('.' + CLS_ITEM, this.element);\n                }\n            }\n            else {\n                var ele = (elements && elements.length && elements.length === 1) ? elements[0] : args;\n                index = innerItems.indexOf(ele);\n                this.removeItemByIndex(index, innerItems);\n            }\n        }\n        this.resize();\n    };\n    Toolbar.prototype.removeItemByIndex = function (index, innerItems) {\n        if (this.tbarEle[index] && innerItems[index]) {\n            var eleIdx = this.tbarEle.indexOf(innerItems[index]);\n            if (this.tbarAlign) {\n                var indexAgn = void 0;\n                indexAgn = this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].indexOf(this.tbarEle[eleIdx]);\n                this.tbarAlgEle[(this.items[eleIdx].align + 's').toLowerCase()].splice(indexAgn, 1);\n            }\n            // tslint:disable-next-line:no-any\n            if (this.isReact) {\n                this.clearTemplate();\n            }\n            detach(innerItems[index]);\n            this.items.splice(eleIdx, 1);\n            this.tbarEle.splice(eleIdx, 1);\n        }\n    };\n    Toolbar.prototype.templateRender = function (templateProp, innerEle, item, index) {\n        var itemType = item.type;\n        var eleObj = templateProp;\n        var isComponent;\n        if (typeof (templateProp) === 'object') {\n            isComponent = typeof (eleObj.appendTo) === 'function';\n        }\n        if (typeof (templateProp) === 'string' || !isComponent) {\n            var templateFn = void 0;\n            var val = templateProp;\n            val = (typeof (templateProp) === 'string') ? templateProp.trim() : templateProp;\n            var e = void 0;\n            try {\n                if (typeof (templateProp) === 'object' && !isNOU(templateProp.tagName)) {\n                    innerEle.appendChild(templateProp);\n                }\n                else if (document.querySelectorAll(val).length) {\n                    var ele = document.querySelector(val);\n                    var tempStr = ele.outerHTML.trim();\n                    innerEle.appendChild(ele);\n                    ele.style.display = '';\n                    if (!isNOU(tempStr)) {\n                        this.tempId.push(val);\n                    }\n                }\n            }\n            catch (e) {\n                templateFn = templateCompiler(val);\n            }\n            var tempArray = void 0;\n            if (!isNOU(templateFn)) {\n                var toolbarTemplateID = this.element.id + index + '_template';\n                tempArray = templateFn({}, this, 'template', toolbarTemplateID, this.isStringTemplate);\n            }\n            if (!isNOU(tempArray) && tempArray.length > 0) {\n                [].slice.call(tempArray).forEach(function (ele) {\n                    if (!isNOU(ele.tagName)) {\n                        ele.style.display = '';\n                    }\n                    innerEle.appendChild(ele);\n                });\n            }\n        }\n        else if (itemType === 'Input') {\n            var ele = this.createElement('input');\n            item.id ? (ele.id = item.id) : (ele.id = getUniqueID('tbr-ipt'));\n            innerEle.appendChild(ele);\n            eleObj.appendTo(ele);\n        }\n        this.add(innerEle, CLS_TEMPLATE);\n        this.tbarEle.push(innerEle);\n    };\n    Toolbar.prototype.buttonRendering = function (item, innerEle) {\n        var dom = this.createElement('button', { className: CLS_TBARBTN });\n        dom.setAttribute('type', 'button');\n        var textStr = item.text;\n        var iconCss;\n        var iconPos;\n        item.id ? (dom.id = item.id) : dom.id = getUniqueID('e-tbr-btn');\n        var btnTxt = this.createElement('span', { className: 'e-tbar-btn-text' });\n        if (textStr) {\n            btnTxt.innerHTML = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(textStr) : textStr;\n            dom.appendChild(btnTxt);\n            dom.classList.add('e-tbtn-txt');\n        }\n        else {\n            this.add(innerEle, 'e-tbtn-align');\n        }\n        if (item.prefixIcon || item.suffixIcon) {\n            if ((item.prefixIcon && item.suffixIcon) || item.prefixIcon) {\n                iconCss = item.prefixIcon + ' e-icons';\n                iconPos = 'Left';\n            }\n            else {\n                iconCss = item.suffixIcon + ' e-icons';\n                iconPos = 'Right';\n            }\n        }\n        var btnObj = new Button({ iconCss: iconCss, iconPosition: iconPos });\n        btnObj.createElement = this.createElement;\n        btnObj.appendTo(dom);\n        if (item.width) {\n            setStyle(dom, { 'width': formatUnit(item.width) });\n        }\n        return dom;\n    };\n    Toolbar.prototype.renderSubComponent = function (item, index) {\n        var innerEle;\n        var dom;\n        innerEle = this.createElement('div', { className: CLS_ITEM });\n        innerEle.setAttribute('aria-disabled', 'false');\n        var tempDom = this.createElement('div', {\n            innerHTML: this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(item.tooltipText) : item.tooltipText\n        });\n        if (!this.tbarEle) {\n            this.tbarEle = [];\n        }\n        if (item.htmlAttributes) {\n            this.setAttr(item.htmlAttributes, innerEle);\n        }\n        if (item.tooltipText) {\n            innerEle.setAttribute('title', tempDom.textContent);\n        }\n        if (item.cssClass) {\n            innerEle.className = innerEle.className + ' ' + item.cssClass;\n        }\n        if (item.template) {\n            this.templateRender(item.template, innerEle, item, index);\n        }\n        else {\n            switch (item.type) {\n                case 'Button':\n                    dom = this.buttonRendering(item, innerEle);\n                    dom.setAttribute('tabindex', '-1');\n                    dom.setAttribute('aria-label', (item.text || item.tooltipText));\n                    innerEle.appendChild(dom);\n                    innerEle.addEventListener('click', this.itemClick.bind(this));\n                    break;\n                case 'Separator':\n                    this.add(innerEle, CLS_SEPARATOR);\n                    break;\n            }\n        }\n        if (item.showTextOn) {\n            var sTxt = item.showTextOn;\n            if (sTxt === 'Toolbar') {\n                this.add(innerEle, CLS_POPUPTEXT);\n                this.add(innerEle, 'e-tbtn-align');\n            }\n            else if (sTxt === 'Overflow') {\n                this.add(innerEle, CLS_TBARTEXT);\n            }\n        }\n        if (item.overflow) {\n            var overflow = item.overflow;\n            if (overflow === 'Show') {\n                this.add(innerEle, CLS_TBAROVERFLOW);\n            }\n            else if (overflow === 'Hide') {\n                if (!innerEle.classList.contains(CLS_SEPARATOR)) {\n                    this.add(innerEle, CLS_POPOVERFLOW);\n                }\n            }\n        }\n        if (item.overflow !== 'Show' && item.showAlwaysInPopup && !innerEle.classList.contains(CLS_SEPARATOR)) {\n            this.add(innerEle, CLS_POPPRI);\n            this.popupPriCount++;\n        }\n        if (item.disabled) {\n            this.add(innerEle, CLS_DISABLE);\n        }\n        if (item.visible === false) {\n            this.add(innerEle, CLS_HIDDEN);\n        }\n        return innerEle;\n    };\n    Toolbar.prototype.itemClick = function (e) {\n        this.activeEleSwitch(e.currentTarget);\n    };\n    Toolbar.prototype.activeEleSwitch = function (ele) {\n        this.activeEleRemove(ele.firstElementChild);\n        this.activeEle.focus();\n    };\n    Toolbar.prototype.activeEleRemove = function (curEle) {\n        if (!isNOU(this.activeEle)) {\n            this.activeEle.setAttribute('tabindex', '-1');\n        }\n        this.activeEle = curEle;\n        if (isNOU(this.trgtEle) && !curEle.parentElement.classList.contains(CLS_TEMPLATE)) {\n            curEle.removeAttribute('tabindex');\n        }\n        else {\n            this.activeEle.setAttribute('tabindex', '0');\n        }\n    };\n    Toolbar.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * Returns the current module name.\n     * @returns string\n     * @private\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    Toolbar.prototype.itemsRerender = function (newProp) {\n        this.items = this.tbarItemsCol;\n        // tslint:disable-next-line:no-any\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        this.destroyMode();\n        this.destroyItems();\n        this.items = newProp;\n        this.tbarItemsCol = this.items;\n        this.renderItems();\n        this.renderOverflowMode();\n        // tslint:disable-next-line:no-any\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    Toolbar.prototype.resize = function () {\n        var ele = this.element;\n        this.tbResize = true;\n        if (this.tbarAlign) {\n            this.itemPositioning();\n        }\n        if (this.popObj && this.overflowMode === 'Popup') {\n            this.popObj.hide();\n        }\n        var checkOverflow = this.checkOverflow(ele, ele.getElementsByClassName(CLS_ITEMS)[0]);\n        if (!checkOverflow) {\n            this.destroyScroll();\n            var multirowele = ele.querySelector('.' + CLS_ITEMS);\n            if (!isNOU(multirowele)) {\n                this.remove(multirowele, CLS_MULTIROWPOS);\n                if (this.tbarAlign) {\n                    this.add(multirowele, CLS_TBARPOS);\n                }\n            }\n        }\n        if (checkOverflow && this.scrollModule && (this.offsetWid === ele.offsetWidth)) {\n            return;\n        }\n        if (this.offsetWid > ele.offsetWidth || checkOverflow) {\n            this.renderOverflowMode();\n        }\n        if (this.popObj) {\n            if (this.overflowMode === 'Extended') {\n                var eleStyles = window.getComputedStyle(this.element);\n                this.popObj.width = parseFloat(eleStyles.width) + ((parseFloat(eleStyles.borderRightWidth)) * 2);\n            }\n            if (this.tbarAlign) {\n                this.removePositioning();\n            }\n            this.popupRefresh(this.popObj.element, false);\n            if (this.tbarAlign) {\n                this.refreshPositioning();\n            }\n        }\n        if (this.element.querySelector('.' + CLS_HSCROLLBAR)) {\n            this.scrollStep = this.element.querySelector('.' + CLS_HSCROLLBAR).offsetWidth;\n        }\n        this.offsetWid = ele.offsetWidth;\n        this.tbResize = false;\n        this.separator();\n    };\n    Toolbar.prototype.extendedOpen = function () {\n        var sib = this.element.querySelector('.' + CLS_EXTENDABLECLASS);\n        if (this.overflowMode === 'Extended' && sib) {\n            this.isExtendedOpen = sib.classList.contains(CLS_POPUPOPEN);\n        }\n    };\n    /**\n     * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n     * @param  {ToolbarModel} newProp\n     * @param  {ToolbarModel} oldProp\n     * @returns void\n     * @private\n     */\n    Toolbar.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var tEle = this.element;\n        this.extendedOpen();\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'items':\n                    if (!(newProp.items instanceof Array && oldProp.items instanceof Array) && !this.isServerRendered) {\n                        var changedProb = Object.keys(newProp.items);\n                        for (var i = 0; i < changedProb.length; i++) {\n                            var index = parseInt(Object.keys(newProp.items)[i], 10);\n                            var property = Object.keys(newProp.items[index])[0];\n                            var newProperty = Object(newProp.items[index])[property];\n                            if (this.tbarAlign || property === 'align') {\n                                this.refresh();\n                                this.trigger('created');\n                                break;\n                            }\n                            var popupPriCheck = property === 'showAlwaysInPopup' && !newProperty;\n                            var booleanCheck = property === 'overflow' && this.popupPriCount !== 0;\n                            if ((popupPriCheck) || (this.items[index].showAlwaysInPopup) && booleanCheck) {\n                                --this.popupPriCount;\n                            }\n                            if (isNOU(this.scrollModule)) {\n                                this.destroyMode();\n                            }\n                            var itemCol = [].slice.call(selectAll('.' + CLS_ITEMS + ' .' + CLS_ITEM, tEle));\n                            // tslint:disable-next-line:no-any\n                            if (this.isReact) {\n                                this.clearTemplate();\n                            }\n                            detach(itemCol[index]);\n                            this.tbarEle.splice(index, 1);\n                            this.addItems([this.items[index]], index);\n                            this.items.splice(index, 1);\n                            if (this.items[index].template) {\n                                this.tbarEle.splice(this.items.length, 1);\n                            }\n                        }\n                    }\n                    else if (isBlazor() && this.isServerRendered) {\n                        this.serverItemsRerender();\n                        this.notify('onItemsChanged', {});\n                    }\n                    else {\n                        this.itemsRerender(newProp.items);\n                    }\n                    break;\n                case 'width':\n                    var wid = tEle.offsetWidth;\n                    setStyle(tEle, { 'width': formatUnit(newProp.width) });\n                    this.renderOverflowMode();\n                    if (this.popObj && wid < tEle.offsetWidth) {\n                        this.popupRefresh(this.popObj.element, false);\n                    }\n                    break;\n                case 'height':\n                    setStyle(this.element, { 'height': formatUnit(newProp.height) });\n                    break;\n                case 'overflowMode':\n                    this.destroyMode();\n                    this.renderOverflowMode();\n                    if (this.enableRtl) {\n                        this.add(tEle, CLS_RTL);\n                    }\n                    this.refreshOverflow();\n                    break;\n                case 'enableRtl':\n                    newProp.enableRtl ? this.add(tEle, CLS_RTL) : this.remove(tEle, CLS_RTL);\n                    if (!isNOU(this.scrollModule)) {\n                        newProp.enableRtl ? this.add(this.scrollModule.element, CLS_RTL) : this.remove(this.scrollModule.element, CLS_RTL);\n                    }\n                    if (!isNOU(this.popObj)) {\n                        newProp.enableRtl ? this.add(this.popObj.element, CLS_RTL) : this.remove(this.popObj.element, CLS_RTL);\n                    }\n                    if (this.tbarAlign) {\n                        this.itemPositioning();\n                    }\n                    break;\n                case 'scrollStep':\n                    if (this.scrollModule) {\n                        this.scrollModule.scrollStep = this.scrollStep;\n                    }\n                    break;\n                case 'enableCollision':\n                    if (this.popObj) {\n                        this.popObj.collision = { Y: this.enableCollision ? 'flip' : 'none' };\n                    }\n                    break;\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([this.element], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([this.element], newProp.cssClass.split(' '));\n                    }\n                    break;\n                case 'allowKeyboard':\n                    this.unwireKeyboardEvent();\n                    if (newProp.allowKeyboard) {\n                        this.wireKeyboardEvent();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Shows or hides the Toolbar item that is in the specified index.\n     * @param  {number | HTMLElement} index - Index value of target item or DOM element  of items to be hidden or shown.\n     * @param  {boolean} value - Based on this Boolean value, item will be hide (true) or show (false). By default, value is false.\n     * @returns void.\n     */\n    Toolbar.prototype.hideItem = function (index, value) {\n        var isElement = (typeof (index) === 'object') ? true : false;\n        var eleIndex = index;\n        var initIndex;\n        var ele;\n        var innerItems = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n        if (isElement) {\n            ele = index;\n        }\n        else if (this.tbarEle[eleIndex]) {\n            var innerItems_1 = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n            ele = innerItems_1[eleIndex];\n        }\n        if (ele) {\n            value ? ele.classList.add(CLS_HIDDEN) : ele.classList.remove(CLS_HIDDEN);\n            if (value && isNOU(this.element.getAttribute('tabindex')) && !ele.classList.contains(CLS_SEPARATOR)) {\n                if (isNOU(ele.firstElementChild.getAttribute('tabindex'))) {\n                    ele.firstElementChild.setAttribute('tabindex', '-1');\n                    var innerItems_2 = [].slice.call(selectAll('.' + CLS_ITEM, this.element));\n                    if (isElement) {\n                        eleIndex = innerItems_2.indexOf(ele);\n                    }\n                    var nextEle = innerItems_2[++eleIndex];\n                    while (nextEle) {\n                        var skipEle = this.eleContains(nextEle);\n                        if (!skipEle) {\n                            nextEle.firstElementChild.removeAttribute('tabindex');\n                            break;\n                        }\n                        nextEle = innerItems_2[++eleIndex];\n                    }\n                }\n            }\n            else if (isNOU(this.element.getAttribute('tabindex')) && !ele.classList.contains(CLS_SEPARATOR)) {\n                initIndex = 0;\n                var setFlag = false;\n                var removeFlag = false;\n                var initELe = innerItems[initIndex];\n                while (initELe) {\n                    if (!initELe.classList.contains(CLS_SEPARATOR)) {\n                        if (isNOU(initELe.firstElementChild.getAttribute('tabindex'))) {\n                            initELe.firstElementChild.setAttribute('tabindex', '-1');\n                            setFlag = true;\n                        }\n                        else {\n                            if (setFlag && removeFlag) {\n                                break;\n                            }\n                            var skipEle = this.eleContains(initELe);\n                            if (!skipEle) {\n                                initELe.firstElementChild.removeAttribute('tabindex');\n                                removeFlag = true;\n                            }\n                            initELe = innerItems[++initIndex];\n                        }\n                    }\n                    else {\n                        initELe = innerItems[++initIndex];\n                    }\n                }\n            }\n            this.refreshOverflow();\n        }\n    };\n    __decorate([\n        Collection([], Item)\n    ], Toolbar.prototype, \"items\", void 0);\n    __decorate([\n        Property('auto')\n    ], Toolbar.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Toolbar.prototype, \"height\", void 0);\n    __decorate([\n        Property('')\n    ], Toolbar.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property('Scrollable')\n    ], Toolbar.prototype, \"overflowMode\", void 0);\n    __decorate([\n        Property()\n    ], Toolbar.prototype, \"scrollStep\", void 0);\n    __decorate([\n        Property(true)\n    ], Toolbar.prototype, \"enableCollision\", void 0);\n    __decorate([\n        Property(true)\n    ], Toolbar.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate([\n        Property(true)\n    ], Toolbar.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Event()\n    ], Toolbar.prototype, \"clicked\", void 0);\n    __decorate([\n        Event()\n    ], Toolbar.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Toolbar.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Toolbar.prototype, \"beforeCreate\", void 0);\n    Toolbar = __decorate([\n        NotifyPropertyChanges\n    ], Toolbar);\n    return Toolbar;\n}(Component));\nexport { Toolbar };\n"]},"metadata":{},"sourceType":"module"}